<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf" template="/template/dashboard-rov-layout.xhtml">

	<ui:define name="head">

		<h:outputStylesheet name="equip-info.css" library="css/commom" />
		<h:outputStylesheet name="realtime.css" library="css/realtime" />

		<!-- Script -->
		<h:outputScript name="realtime.js" library="js/realtime" />

		<style>
			@keyframes myMove {
				from {
					background-position: 100% 0;
					background-repeat: repeat;
				}

				to {
					background-position: 0% 0;
				}
			}
		</style>
		
		<script>
		
		////////////////////////////////////
		//AUTO UPDATE PAGE INTERVAL
		///////////////////////////////////
		
		setTimeout(() => {			
			setInterval(() => {
				
			    var data = new Date();
			    var n = data.getSeconds();
			    var minute = data.getMinutes();
			                          		
			     if (minute == 15 || minute == 30 || minute == 45 || minute == 0) {         	        	
			           if (n &lt; 4) 		        	   
			            location.href = location.href.replace("#", "")
			     }
			     
			}, 3000)
		}, 4000)
	
		////////////////////////////////////
		//AUTO UPDATE PAGE INTERVAL
		///////////////////////////////////
		
		</script>

	</ui:define>

	<ui:define name="main-content">

		<h:form id="real">

			<!--  Map Content -->
			<div class="overflow" id="content">

				<!-- MAP CONTENT -->

				<div class="map-content">
					<h:graphicImage class="scaled" id="map" value="#{loginAccount.linearMapUI}" />

				</div>

				<!-- Carrega os equipamentos -->

				<c:forEach items="#{listEquips.equips}" var="loadItem">

					<ui:fragment rendered="#{loadItem.value}">
						
							<div class="equipments">
								
								<c:forEach items="#{loadItem.list}" var="item" varStatus="loop">
								
									<c:choose>
										<c:when test="#{item.table_id eq 'pmv'}">
											<div id="#{item.table_id}#{item.equip_id}" class="equip-info #{item.table_id}"
												posX="#{item.linearPosX}" posY="#{item.linearPosY}" item-width="#{item.linearWidth}">
	
												<!-- Table with DIV -->
	
												<div class="container tableStyle card">
													<div class="dms-name card-header py-0">
														<div id="dmsTab#{item.equip_id}" class="text-center">
															<p class="mb-0 text-white">#{item.nome} - #{item.km}</p>
														</div>
													</div>
													<div class="row text-center card-body p-0">
														<div id="child-img" class="col-2 padding-pmv">
															<h:graphicImage
																value="/resources/images/pictures/#{dmsLinearView.image[loop.index]}"
																styleClass="ui-graphic-image" />
														</div>
														<div id="child-msg" class="col-auto">
															<div id="msg#{item.equip_id}" class="table-message">
																<div class="row border-table-right">
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][0]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][1]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][2]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][3]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][4]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][5]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][6]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][7]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][8]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][9]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][0][10]}</div>
																	<div class="col-1 px-0 border-table r">
																		#{dmsLinearView.letter[loop.index][0][11]}</div>
																</div>
																<div class="row border-table-right">
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][0]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][1]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][2]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][3]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][4]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][5]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][6]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][7]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][8]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][9]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][10]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][1][11]}</div>
																</div>
																<div class="row border-table-right bottom">
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][0]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][1]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][2]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][3]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][4]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][5]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][6]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][7]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][8]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][9]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][10]}</div>
																	<div class="col-1 px-0 border-table">
																		#{dmsLinearView.letter[loop.index][2][11]}</div>
																</div>
															</div>
														</div>
													</div>
												</div>
	
											</div>
										</c:when>
										<c:when test="#{item.table_id eq 'sat'}">
											<div id="#{item.table_id}#{item.equip_id}" class="equip-box-sat text-dark" posX="#{item.linearPosX}" posY="#{item.linearPosY}" item-width="#{item.linearWidth}" status-period="#{satMapsView.satListValues.get(loop.index).statusInterval}" status="#{satMapsView.satStatus.get(loop.index).status}">

								<div id="sat#{item.equip_id}" class="table-sat card border-dark">
									<div id="satName#{item.equip_id}" class="satName card-header p-0 border-dark">
										<div id="satTab#{item.equip_id}" class="text-center">
											<p class="mb-0">#{item.nome} - #{item.km}</p>
										</div>
									</div>
									<div class="row text-center card-body p-0 mx-0">
										<div class="col-5 padding-sat border-right border-bottom border-dark">
											<i class="fas fa-car sat-cars"
												title="#{realtimeLabels.realtime_sat_cars_icon_title}"></i>
											<span id="qtd1">#{satMapsView.satListValues.get(loop.index).quantidadeS1}</span>
										</div>
										<div class="col-7 padding-sat border-bottom border-dark">
											<i class="fas fa-tachometer-alt sat-speed" title="km/h"></i>
											<span id="speed1">#{satMapsView.satListValues.get(loop.index).velocidadeS1}</span><span class="km"> km/h</span>
										</div>
										<div class="col-5 padding-sat border-right border-dark">
											<i class="fas fa-car sat-cars"
												title="#{realtimeLabels.realtime_sat_speed_icon_title}"></i>
											<span id="qtd2">#{satMapsView.satListValues.get(loop.index).quantidadeS2}</span>
										</div>
										<div class="col-7 padding-sat">
											<i class="fas fa-tachometer-alt sat-speed" title="km/h"></i>
											<span id="speed2">#{satMapsView.satListValues.get(loop.index).velocidadeS2}</span><span class="km"> km/h</span>
										</div>
									</div>


								</div>
								<div id="fluxos">
									<div id="img1FluxoTab#{item.equip_id}" style="margin: 3px;">
									</div>
									<div id="img2FluxoTab#{item.equip_id}" style="margin: 3.2px;">
									</div>
								</div>
							</div>
										</c:when>
										<c:otherwise>
											<div id="#{item.table_id}#{item.equip_id}" posX="#{item.linearPosX}"
												posY="#{item.linearPosY}" item-width="#{item.linearWidth}" class="equip-box #{item.table_id}">
												<div id="#{item.table_id}Tab#{item.equip_id}" class="row mb-1 generic">
													<p class="col-auto mb-0 pr-1 generic-text">#{item.nome} - #{item.km}</p>
													<span id="#{item.table_id}Status1" class="equip-status"></span>												
												</div>
	
												<c:if test="#{item.table_id eq 'cftv'}">
													<h:graphicImage class="equip-image"
														value="/resources/images/equips/camera.png" />
												</c:if>
												<c:if test="#{item.table_id eq 'colas'}">
													<h:graphicImage class="equip-imageCAM"
														value="/resources/images/equips/dai_lpr_colas.png" />
												</c:if>
												<c:if test="#{item.table_id eq 'comms'}">
													<h:graphicImage class="equip-imageCAM"
														value="/resources/images/equips/dai_lpr_colas.png" />
												</c:if>
												<c:if test="#{item.table_id eq 'dai'}">
													<h:graphicImage class="equip-imageCAM"
														value="/resources/images/equips/dai_lpr_colas.png" />
												</c:if>
												<c:if test="#{item.table_id eq 'lpr'}">
													<h:graphicImage class="equip-imageCAM"
														value="/resources/images/equips/dai_lpr_colas.png" />
												</c:if>
												<c:if test="#{item.table_id eq 'mto'}">
													<h:graphicImage class="equip-imagePOST"
														value="/resources/images/equips/metereologico.png" />
												</c:if>
												<c:if test="#{item.table_id eq 'sos'}">
													<h:graphicImage class="equip-image"
														value="/resources/images/equips/sos.png" />
												</c:if>
												<c:if test="#{item.table_id eq 'speed'}">
													<h:graphicImage class="equip-imagePOST"
														value="/resources/images/equips/speed.png" />
												</c:if>
												<c:if test="#{item.table_id eq 'wim'}">
													<h:graphicImage class="equip-image"
														value="/resources/images/equips/wim.png" />
												</c:if>
											</div>
										</c:otherwise>
									</c:choose>
								
								</c:forEach>
							
							</div>

					</ui:fragment>
					
				</c:forEach>



			</div>

			<!--Function -->
			<script>
			

			//DRAW AND SET SAT DEFINITIONS    

			
					mapMove();
			</script>

		</h:form>

	</ui:define>

	<ui:define name="jscript"></ui:define>

</ui:composition>
