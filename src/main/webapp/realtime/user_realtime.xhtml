<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf" template="/template/dashboard-rov-layout.xhtml">

	<ui:define name="head">

        <h:outputStylesheet name="form-style.css" library="css/forms" />
		<h:outputStylesheet name="layoutSAT.css" library="css/sat" />
		<h:outputStylesheet name="layoutPMV.css" library="css/pmv" />
		<h:outputStylesheet name="layoutGENERIC.css" library="css/generic" />
		<h:outputStylesheet name="realtime.css" library="css/realtime" />
	  
		<!-- Script -->
		<h:outputScript library="js/realtime" name="realtime.js?version=#{notificationsView.timestamp}"  />
		<h:outputScript library="bootstrap/js" name="bootstrap-input-spinner.js?version=#{notificationsView.timestamp}" />
		<h:outputScript library="bootstrap/js" name="bootstrap-input-spinner.js?version=#{notificationsView.timestamp}" />

	</ui:define>

	<ui:define name="main-content">
	
	<!-- ALERTS POSITION -->
		
		<div class="messages"></div>  
       
		<!-- WEB ZOOM -->
		<div class="map-options">
			<div id="topButtons">
				
				<button type="button" id="zoomIn" class="zoomButton" data-toggle="tooltip" data-placement="bottom"
					title="Zoom In" data-trigger="hover" >
					<span><i class="fas fa-plus-square fa-2x"></i></span>
				</button>

				<button type="button" id="zoomOut" class="zoomButton" data-toggle="tooltip" data-placement="bottom"
					title="Zoom Out" data-trigger="hover" >
					<span><i class="fas fa-minus-square fa-2x"></i></span>
				</button>
			
			</div>			
		</div>
		
		 <!--  ******************************************************************************************************* -->		
					
		<!-- OVERFLOW -->
		<section class="overflow" scroll-zoom="0.1" max-scale="1.5" id="content" >			
		
            <!-- START SECTION -->
			<div id="zoomtext" scale="1" class="section">				
				<h:graphicImage class="grab-map" value="#{loginAccount.linearMapUI}" /> <!-- MAP FRONT IMAGE -->
			</div>
																
			<!-- DRAG ITEMS -->		
			<div class="draggable" id="equipAll">
			
			<!-- Carrega os equipamentos -->

				<c:forEach items="#{listEquips.equips}" var="loadItem"> 

					<ui:fragment rendered="#{loadItem.value}">
						
							<div class="equipments">
								
								<c:forEach items="#{loadItem.list}" var="item" varStatus="loop">
								
									<c:choose>
									<c:when test="#{item.table_id eq 'dms'}">
										<div id="listPMV#{item.equip_id}" type="#{item.message.tipo}"
											name="#{item.nome}" driver="#{item.message.driver}">																
											<input type="hidden" name="page1"
												imageId="#{item.message.pages[0].id_image}"
												image="#{item.message.pages[0].image}"
												imageId2="#{item.message.pages[0].id_image2}"
												image2="#{item.message.pages[0].image2}"
												line1="#{item.message.pages[0].text1}"
												line2="#{item.message.pages[0].text2}"
												line3="#{item.message.pages[0].text3}"
												timer="#{item.message.pages[0].timer}" />
											<input type="hidden" name="page2"
												imageId="#{item.message.pages[1].id_image}"
												image="#{item.message.pages[1].image}"
												imageId2="#{item.message.pages[1].id_image2}"
												image2="#{item.message.pages[1].image2}"
												line1="#{item.message.pages[1].text1}"
												line2="#{item.message.pages[1].text2}"
												line3="#{item.message.pages[1].text3}"
												timer="#{item.message.pages[1].timer}" />
											<input type="hidden" name="page3"
												imageId="#{item.message.pages[2].id_image}"
												image="#{item.message.pages[2].image}"
												imageId2="#{item.message.pages[2].id_image2}"
												image2="#{item.message.pages[2].image2}"
												line1="#{item.message.pages[2].text1}"
												line2="#{item.message.pages[2].text2}"
												line3="#{item.message.pages[2].text3}"
												timer="#{item.message.pages[2].timer}" />
											<input type="hidden" name="page4"
												imageId="#{item.message.pages[3].id_image}"
												image="#{item.message.pages[3].image}"
												imageId2="#{item.message.pages[3].id_image2}"
												image2="#{item.message.pages[3].image2}"
												line1="#{item.message.pages[3].text1}"
												line2="#{item.message.pages[3].text2}"
												line3="#{item.message.pages[3].text3}"
												timer="#{item.message.pages[3].timer}" />
											<input type="hidden" name="page5"
												imageId="#{item.message.pages[4].id_image}"
												image="#{item.message.pages[4].image}"
												imageId2="#{item.message.pages[4].id_image2}"
												image2="#{item.message.pages[4].image2}"
												line1="#{item.message.pages[4].text1}"
												line2="#{item.message.pages[4].text2}"
												line3="#{item.message.pages[4].text3}"
												timer="#{item.message.pages[4].timer}" />
										</div>
										<div id="#{item.table_id}#{item.equip_id}" class="equip-info #{item.table_id}"
											posX="#{item.linearPosX}" posY="#{item.linearPosY}" item-width="#{item.linearWidth}">

											<!-- Table with DIV -->

											<div class="tableStyle card">										
												<div class="dms-name card-header py-0">											
													<div class="text-center dmsTab#{item.equip_id}">													
													<a role="button" class="dms-info-bagde" data-toggle="popover" 
									                 data-popover-content="#pop#{item.table_id}#{item.equip_id}">i</a>													
														<span class="namePMV">#{item.nome}</span>
														<span class="kmPMV">#{item.km}</span>
													</div>
												</div>
												<div class="row text-center card-body p-0">
													<div id="child-img" class="col-2 padding-pmv">
														<img src="/resources/images/pictures/#{pmvMessage.image}"
															class="picture-box primary" id-img="0" />
													</div>
													<div id="child-msg" class="col-auto msg-pos">
														<div id="message" class="table-message">
															<div class="row border-table-right message1" msg="">
																<div class="col-1 px-0 border-table">
																	<span id="box-1"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-2"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-3"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-4"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-5"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-6"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-7"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-8"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-9"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-10"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-11"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-12"></span>
																</div>
															</div>
															<div class="row border-table-right message2" msg="">
																<div class="col-1 px-0 border-table">
																	<span id="box-13"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-14"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-15"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-16"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-17"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-18"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-19"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-20"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-21"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-22"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-23"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-24"></span>
																</div>
															</div>
															<div class="row border-table-right bottom message3" msg="">
																<div class="col-1 px-0 border-table">
																	<span id="box-25"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-26"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-27"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-28"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-29"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-30"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-31"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-32"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-33"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-34"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-35"></span>
																</div>
																<div class="col-1 px-0 border-table">
																	<span id="box-36"></span>
																</div>
															</div>
														</div>
													</div>
													<div id="child-img" class="col-2 second-img ml-auto">
														<img src="/resources/images/pictures/#{pmvMessage.image}"
															class="picture-box secondary" id-img="0" />
													</div>
												</div>
											</div>
										</div>
										
										<div id="pop#{item.table_id}#{item.equip_id}" style="display: none;">
											<div class="popover-header">#{infoLabels.info_label_header}</div>

											<div class="popover-body">
											
												<div class="row">
													<div class="equip-label-left"> <b>#{infoLabels.info_label_equip_module}
															:</b>&nbsp;#{item.equip_type}</div>
												</div>

												<div class="row">
													<div class="equip-label-left"><b>#{infoLabels.info_label_equip_id}
															:</b>&nbsp;#{item.equip_id}</div>
												</div>
												
												<div class="row">
													<div class="equip-label-left"> <b>#{infoLabels.info_label_name}
															:</b>&nbsp;#{item.nome}</div>
												</div>
												
												<div class="row">
													<div class="equip-label-left"> <b>#{infoLabels.info_label_equip_ip}
															:</b>&nbsp;#{item.dms_ip}</div>
												</div>
												
												<div class="row">
													<div class="equip-label-left"> <b>#{infoLabels.info_label_equip_driver}
															:</b>&nbsp;#{item.dms_type}</div>
												</div>

												<div class="row">
													<div class="equip-label-left"><b>#{infoLabels.info_label_highway}
															:</b>&nbsp;#{item.estrada}</div>
												</div>

												<div class="row">
													<div class="equip-label-left"><b>#{infoLabels.info_label_km}
															:</b>&nbsp;#{item.km}</div>
												</div>

												<div class="row">
													<div class="equip-label-left"><b>#{infoLabels.info_label_city}
															:</b>&nbsp;#{item.cidade}&nbsp;&nbsp;&nbsp;</div>
												</div>
											</div>
										</div>
										
									</c:when>										
									
									
							    <c:when test="#{item.table_id eq 'sat'}">
										
								<div id="#{item.table_id}#{item.equip_id}" class="equip-box-sat text-dark" posX="#{item.linearPosX}" posY="#{item.linearPosY}" item-width="#{item.linearWidth}" status-period="#{satMapsView.satListValues.get(loop.index).statusInterval}" status="#{satMapsView.satStatus.get(loop.index).status}">
								<div id="sat#{item.equip_id}" class="table-sat card border-dark">
									<div id="satName#{item.equip_id}" class="satName card-header p-0 border-dark">									
										<div id="satTab#{item.equip_id}" class="text-center">
											<p class="mb-0">#{item.nome} - #{item.km}</p>
										</div>
										
									 <a role="button" class="sat-info-bagde" data-toggle="popover" 
									         data-popover-content="#pop#{item.table_id}#{item.equip_id}">i</a>								 
									
								   </div>
									<div class="row text-center card-body p-0 mx-0">
										<div class="col-5 padding-sat border-right border-bottom border-dark on-mouse-hover" data-toggle="tooltip" data-placement="left" title="#{item.sentido1}" >
											<i class="fas fa-car sat-cars"
												title="#{realtimeLabels.realtime_sat_cars_icon_title}"></i>
											<span id="qtd1">#{satMapsView.satListValues.get(loop.index).quantidadeS1}</span>
										</div>
										<div class="col-7 padding-sat border-bottom border-dark on-mouse-hover" data-toggle="tooltip" data-placement="right" title="#{item.sentido1}" >
											<i class="fas fa-tachometer-alt sat-speed" title="km/h"></i>
											<span id="spd1">#{satMapsView.satListValues.get(loop.index).velocidadeS1}</span><span class="km"> km/h</span>
										</div>
										<div class="col-5 padding-sat border-right border-dark on-mouse-hover" data-toggle="tooltip" data-placement="left" title="#{item.sentido2}">
											<i class="fas fa-car sat-cars"
												title="#{realtimeLabels.realtime_sat_speed_icon_title}"></i>
											<span id="qtd2">#{satMapsView.satListValues.get(loop.index).quantidadeS2}</span>
										</div>
										<div class="col-7 padding-sat on-mouse-hover" data-toggle="tooltip" data-placement="right" title="#{item.sentido2}">
											<i class="fas fa-tachometer-alt sat-speed" title="km/h"></i>
											<span id="spd2">#{satMapsView.satListValues.get(loop.index).velocidadeS2}</span><span class="km"> km/h</span>
										</div>
									</div>

								</div>
								<div id="fluxos">

									<div id="img1FluxoTab#{item.equip_id}" class="on-mouse-hover fluxo-1-margin" data-toggle="tooltip" data-placement="top" title="#{item.sentido1}" ></div>								
							
									<div id="img2FluxoTab#{item.equip_id}" class="on-mouse-hover fluxo-2-margin" data-toggle="tooltip" data-placement="top" title="#{item.sentido2}" ></div>
								</div>
											
								<!-- HTML to write -->
																
							</div>
							
								  <div id="pop#{item.table_id}#{item.equip_id}" style="display: none;">
										<div class="popover-header">#{infoLabels.info_label_header}</div>
													
										<div class="popover-body">
																					
										<div class="row">
										<div class="equip-label-left"><b>#{infoLabels.info_label_equip_id} :</b>&nbsp;#{item.equip_id}</div>								
										</div>
										
										<div class="row">
										<div class="equip-label-left"> <b>#{infoLabels.info_label_name} :</b>&nbsp;#{item.nome}</div>
										</div>
										
										<div class="row">
										<div class="equip-label-left"><b>#{infoLabels.info_label_highway} :</b>&nbsp;#{item.estrada}</div>							            					
										</div>
																		
										<div class="row">								
										<div class="equip-label-left"><b>#{infoLabels.info_label_km} :</b>&nbsp;#{item.km}</div>				            					
										</div>
										
										<div class="row">
										 <div class="equip-label-left"><b>#{infoLabels.info_label_city} :</b>&nbsp;#{item.cidade}&nbsp;&nbsp;&nbsp;</div>	
										</div>
										<div class="row">								
							            <div class="equip-label-left"><b>#{infoLabels.info_label_number_lanes} :</b>&nbsp;#{item.numFaixas}&nbsp;</div>
										</div>
										
										<div class="row">
										<div class="equip-label-left"><b>#{infoLabels.info_label_direction1} :</b>&nbsp;#{item.sentido1}&nbsp;&nbsp;&nbsp;</div>
										</div>
										
										<div class="row">								
							            <div class="equip-label-left"> <b>#{infoLabels.info_label_direction2} :</b>&nbsp;#{item.sentido2}&nbsp;&nbsp;&nbsp;</div>
										</div>
												
									   </div>
									 </div>
											
										</c:when>
																			
										<c:otherwise>
											<div id="#{item.table_id}#{item.equip_id}" posX="#{item.linearPosX}"
												posY="#{item.linearPosY}" item-width="#{item.linearWidth}" class="equip-box #{item.table_id}">	
																		         
											<div id="#{item.table_id}Tab#{item.equip_id}" class="row mb-3 ml-1 equip-header">		<!-- HEADER -->									
												<p class="col-auto mb-0 pr-1 equip-label">#{item.nome}</p>
												<p class="col-12 mb-0 equip-label">#{item.km}</p>
											</div> <!---->
											
											<c:if test="#{item.table_id eq 'cftv'}">
												<h:graphicImage class="equip-image"
													value="/resources/images/equips/camera.png" />
											</c:if>
											<c:if test="#{item.table_id eq 'colas'}">
												<h:graphicImage class="equip-imageCOLAS"
													value="/resources/images/equips/colas.png" />
											</c:if>
											<c:if test="#{item.table_id eq 'comms'}">
												<h:graphicImage class="equip-imageCOMMS"
													value="/resources/images/equips/comms.png" />
											</c:if>
											<c:if test="#{item.table_id eq 'dai'}">
												<h:graphicImage class="equip-imageDAI"
													value="/resources/images/equips/dai.png" />
											</c:if>
											<c:if test="#{item.table_id eq 'ocr'}">
												<h:graphicImage class="equip-imageOCR"
													value="/resources/images/equips/ocr.png" />
											</c:if>
											<c:if test="#{item.table_id eq 'mto'}">
												<h:graphicImage class="equip-imagePOST"
													value="/resources/images/equips/metereologico.png" />
											</c:if>									
										<c:if test="#{item.table_id eq 'sv'}">
											<h:graphicImage class="equip-imagePOST"
												value="/resources/images/equips/metereologico.png" />
										</c:if>
										<c:if test="#{item.table_id eq 'sos'}">
												<h:graphicImage class="equip-image"
													value="/resources/images/equips/sos.png" />
											</c:if>
											<c:if test="#{item.table_id eq 'speed'}">
												<h:graphicImage class="equip-imageSPD"
													value="/resources/images/equips/speed.png" />
											</c:if>
											<c:if test="#{item.table_id eq 'wim'}">
												<h:graphicImage class="equip-image"
													value="/resources/images/equips/wim.png" />
											</c:if>
																										
										   <a role="button" class="generic-info-bagde" data-toggle="popover" 
									         data-popover-content="#pop#{item.table_id}#{item.equip_id}">i</a>
											 <span id="#{item.table_id}#{item.equip_id}Status1" class="equip-status"></span>										
										</div>
										
										<div id="pop#{item.table_id}#{item.equip_id}" style="display: none;">
											<div class="popover-header">#{infoLabels.info_label_header}</div>

											<div class="popover-body">
											
												<div class="row">
													<div class="equip-label-left"> <b>#{infoLabels.info_label_equip_module}
															:</b>&nbsp;#{item.equip_type}</div>
												</div>

												<div class="row">
													<div class="equip-label-left"><b>#{infoLabels.info_label_equip_id}
															:</b>&nbsp;#{item.equip_id}</div>
												</div>

												<div class="row">
													<div class="equip-label-left"> <b>#{infoLabels.info_label_name}
															:</b>&nbsp;#{item.nome}</div>
												</div>

												<div class="row">
													<div class="equip-label-left"><b>#{infoLabels.info_label_highway}
															:</b>&nbsp;#{item.estrada}</div>
												</div>

												<div class="row">
													<div class="equip-label-left"><b>#{infoLabels.info_label_km}
															:</b>&nbsp;#{item.km}</div>
												</div>

												<div class="row">
													<div class="equip-label-left"><b>#{infoLabels.info_label_city}
															:</b>&nbsp;#{item.cidade}&nbsp;&nbsp;&nbsp;</div>
												</div>
											</div>
										</div>
																				
									</c:otherwise>
									</c:choose>
							
								</c:forEach>
							
							</div>

					</ui:fragment>
					
				</c:forEach>					
			
			</div>	<!---->	
				
			</section>
	</ui:define>
	
	<ui:define name="jscript">
	
	<h:outputScript name="dmsAnimation.js?version=#{notificationsView.timestamp}" p:type="module" library="js/dms" />
	
	</ui:define>

</ui:composition>
