<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:p="http://primefaces.org/ui"
	template="/pages/main/template/dashboard-rov-layout.xhtml">

	<ui:define name="head">
		<!-- CSS -->
		<h:outputStylesheet name="equip-info.css" library="css/commom" />
		<h:outputStylesheet name="commons.css" library="css/commom" />
		<h:outputStylesheet name="message-activate.css"
			library="css/pmv/activate" />
		<!-- JAVASCRIPT -->
		<h:outputScript name="msgAtv.js" library="js/dms" />
	</ui:define>
	<ui:define name="main-content">
		<!--Inicio da animação  -->
		<div id="preloader">
			<div class="inner">
				<!-- HTML DA ANIMAÇÃO MUITO LOUCA DO SEU PRELOADER! -->
				<div class="bolas">
					<div></div>
					<div></div>
					<div></div>
				</div>
			</div>
		</div>
		<!-- Final da animação -->
		<div class="jumbotron bg-dark text-center">
			<!-- INÍCIO DO FORMULARIO EQUIP -->
			<h:form id="formSelect">
				<div class="row confTop">

					<div class="col-sm">
						<!-- GRID OPÇÕES INICIO -->
						<div class="col-1" id="ocultar">
							<button type="button" class="btn btn-warning"
								onclick="hiddenOption();">Ocultar</button>
						</div>
						<div class="col-1" style="display: none" id="mostrar">
							<button type="button" class="btn btn-warning"
								onclick="mostrarOption();">Mostrar</button>
						</div>
						<!-- GRID OPÇÕES FINAL -->
					</div>
				</div>
				<!-- INÍCIO DA GRID - ESTRUTURA DO DAS TRABELAS -->
				<div>
					<div id="message-show">
						<p:messages id="msgs" showDetail="true" autoUpdate="true"
							closable="true" />
					</div>
					<div class="row conteudoPag">
						<!-- INÍCIO DA TABELA SELECAO -->
						<div class="col-3 selecao" id="mostrarOption">
							<div id="message-block">
								<div id="label-message-content">
									<h:outputLabel class="label-message-block"
										value="#{dmsLabels.dms_active_messages_label_selection}" />
								</div>
								<!-- INÍCIO DO PAINEL -->
								<div class="card text-white mb-3" id="actionHidden">
									<div class="card-header">
										<div class="row">
											<div class="col-sm">
												<!-- INÍCIO DO CHECK BOX TOPO -->
												<p:selectBooleanCheckbox
													itemLabel="#{dmsLabels.dms_active_messages_select_all}"
													value="#{interfaces.checkAllBoxes}"
													class="ui-checkbox-equip-all" id="checkList1">
													<p:ajax update="@form"
														listener="#{interfaces.checkAllItems}" />
												</p:selectBooleanCheckbox>
												<!-- FINAL DO CHECK BOX TOPO -->
											</div>
										</div>
										<!-- INICIO SELECT OPTION -->
										<div id="selection-div">
											<div id="type-list">
												<h:selectOneMenu value="#{interfaces.typeSelection}"
													id="selection-list" disabled="#{interfaces.checkbox}"
													style="width: 95%;" class="form-control inputDesign">
													<f:selectItem itemValue="" itemLabel="Tipo" />
													<f:selectItem itemValue="All"
														itemLabel="#{dmsLabels.dms_active_messages_select_label_all_messages}" />
													<f:selectItem itemValue="Alert"
														itemLabel="#{dmsLabels.dms_active_messages_select_label_alert}" />
													<f:selectItem itemValue="Information"
														itemLabel="#{dmsLabels.dms_active_messages_select_label_informations}" />
													<f:selectItem itemValue="Signaling"
														itemLabel="#{dmsLabels.dms_active_messages_select_label_signaling}" />
													<p:ajax update="available-id"
														listener="#{interfaces.getMessageListType}" />
												</h:selectOneMenu>
											</div>
										</div>
										<!-- FINAL SELECT OPTION -->
									</div>
									<div class="card-body">
										<div id="message-selected" class="form-control inputDesign">
											<div id="graphic">
												<p:graphicImage
													value="/resources/images/pictures/#{interfaces.imagem}"
													height="68" width="68" id="image-box" />
											</div>
											<div id="text">
												<div id="row1">
													<h:outputText value="#{interfaces.texto1}" id="text-1" />
												</div>
												<div id="row2">
													<h:outputText value="#{interfaces.texto2}" id="text-2" />
												</div>
												<div id="row3">
													<h:outputText value="#{interfaces.texto3}" id="text-3" />
												</div>
											</div>
										</div>
										<div id="messages-list">
											<p:selectOneListbox id="available-id"
												value="#{interfaces.message}" autoWidth="true"
												class="form-control" effect="fade" var="m" filter="false"
												filterMatchMode="startsWith"
												disabled="#{interfaces.checkbox}">
												<f:converter converterId="messageConverter" />
												<f:selectItems value="#{interfaces.messages}" var="msg"
													itemLabel="#{msg.id_reg}" itemValue="#{msg}" />
												<p:ajax event="change"
													update="image-box, text-1, text-2, text-3, available-id, selection-list"
													listener="#{interfaces.loadMessageInformation}" />
												<p:column>
													<h:graphicImage
														value="/resources/images/pictures/#{m.imagem}" width="50"
														height="50" />
												</p:column>
												<p:column>  
								                	#{m.texto1} <br />
								                  	#{m.texto2} <br />
								                  	#{m.texto3}
				            					</p:column>
											</p:selectOneListbox>
										</div>
										<!-- INICIO DOS BOTÔES -->
										<div class="btn-group btn-group-sm" role="group"
											aria-label="Basic example">
											<h:commandButton
												value="#{dmsLabels.dms_active_messages_btn_apply}"
												id="send-message" disabled="#{interfaces.send}"
												class="btn btn-secondary confBtn">
												<f:passThroughAttribute name="data-toggle" value="modal" />
												<f:passThroughAttribute name="data-target"
													value="#updateModal" />
												<f:ajax execute="@form" render="@none" />
											</h:commandButton>
											<h:commandButton
												value="#{dmsLabels.dms_active_messages_btn_preview}"
												id="btn-up" disabled="#{interfaces.checkbox}"
												action="#{interfaces.aplicarMensagens}"
												onclick="sumirMsg();" class="btn btn-secondary">
												<f:ajax execute="@form" render="@form" />
											</h:commandButton>
											<h:commandButton
												value="#{dmsLabels.dms_active_messages_btn_clean}"
												id="btn-clean" disabled="#{interfaces.checkbox}"
												action="#{interfaces.limparMensagens}"
												class="btn btn-secondary ">
												<f:ajax execute="@form" render="@form" />
											</h:commandButton>
											<h:commandButton
												value="#{dmsLabels.dms_active_messages_btn_reset}"
												id="btn-refresh" action="#{interfaces.resetMessages}"
												disabled="#{interfaces.checkbox}" class="btn btn-secondary">
												<f:ajax execute="@form" render="@form" />
											</h:commandButton>
										</div>

										<!-- FINAL DOS BOTÔES -->
									</div>
								</div>
								<!-- FINAL DO PAINEL -->
							</div>
						</div>
						<!-- FINAL DA TABELA SELECAO -->
						<!-- INÍCIO DA TABELA ESTADO ATUAL -->
						<div class="col-md atual">
							<div class="equip-content" id="one">
								<h:outputLabel class="label-header-content"
									value="#{dmsLabels.dms_active_messages_label_current_state}" />
								<c:forEach items="#{interfaces.dmsList}" var="item"
									varStatus="loop">
									<div class="option">
										<div class="check-select">
											<p:selectBooleanCheckbox id="check#{item.equip_id}"
												itemLabel="" value="#{interfaces.state[loop.index]}"
												class="ui-checkbox-equip">
												<p:ajax
													update="btn-up, btn-clean, btn-refresh, selection-list, available-id"
													listener="#{interfaces.checkBoxSelection}" />
											</p:selectBooleanCheckbox>
										</div>
										<div id="#{item.equip_id}" class="equip-info">
											<div class="name-block">
												<div class="name">#{item.nome}</div>
												<div class="km">#{item.km}</div>
											</div>
											<div class="equip-core">
												<table id="dms#{item.equip_id}" class="table-img">
													<tr>
														<td class="image-block"><h:graphicImage
																value="/resources/images/pictures/#{interfaces.image[loop.index]}"
																styleClass="ui-graphic-board" /></td>
													</tr>
												</table>
												<table class="table-message">
													<tr>
														<td>#{interfaces.letter[loop.index][0][0]}</td>
														<td>#{interfaces.letter[loop.index][0][1]}</td>
														<td>#{interfaces.letter[loop.index][0][2]}</td>
														<td>#{interfaces.letter[loop.index][0][3]}</td>
														<td>#{interfaces.letter[loop.index][0][4]}</td>
														<td>#{interfaces.letter[loop.index][0][5]}</td>
														<td>#{interfaces.letter[loop.index][0][6]}</td>
														<td>#{interfaces.letter[loop.index][0][7]}</td>
														<td>#{interfaces.letter[loop.index][0][8]}</td>
														<td>#{interfaces.letter[loop.index][0][9]}</td>
														<td>#{interfaces.letter[loop.index][0][10]}</td>
														<td>#{interfaces.letter[loop.index][0][11]}</td>
													</tr>
													<tr>
														<td>#{interfaces.letter[loop.index][1][0]}</td>
														<td>#{interfaces.letter[loop.index][1][1]}</td>
														<td>#{interfaces.letter[loop.index][1][2]}</td>
														<td>#{interfaces.letter[loop.index][1][3]}</td>
														<td>#{interfaces.letter[loop.index][1][4]}</td>
														<td>#{interfaces.letter[loop.index][1][5]}</td>
														<td>#{interfaces.letter[loop.index][1][6]}</td>
														<td>#{interfaces.letter[loop.index][1][7]}</td>
														<td>#{interfaces.letter[loop.index][1][8]}</td>
														<td>#{interfaces.letter[loop.index][1][9]}</td>
														<td>#{interfaces.letter[loop.index][1][10]}</td>
														<td>#{interfaces.letter[loop.index][1][11]}</td>
													</tr>
													<tr>
														<td>#{interfaces.letter[loop.index][2][0]}</td>
														<td>#{interfaces.letter[loop.index][2][1]}</td>
														<td>#{interfaces.letter[loop.index][2][2]}</td>
														<td>#{interfaces.letter[loop.index][2][3]}</td>
														<td>#{interfaces.letter[loop.index][2][4]}</td>
														<td>#{interfaces.letter[loop.index][2][5]}</td>
														<td>#{interfaces.letter[loop.index][2][6]}</td>
														<td>#{interfaces.letter[loop.index][2][7]}</td>
														<td>#{interfaces.letter[loop.index][2][8]}</td>
														<td>#{interfaces.letter[loop.index][2][9]}</td>
														<td>#{interfaces.letter[loop.index][2][10]}</td>
														<td>#{interfaces.letter[loop.index][2][11]}</td>
													</tr>
												</table>
											</div>
										</div>
										<p:dialog header="#{msgs.pmv_modal_info_title}"
											widgetVar="infoModal#{item.table_id}" modal="true"
											height="200" showEffect="slide" hideEffect="slide"
											closable="false" resizable="false">
											<br />
											<table class="table-info">
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_equip_id}</b></td>
													<td id="id" class="table-col2">#{item.equip_id}</td>
												</tr>
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_name}</b></td>
													<td id="name" class="table-col2">#{item.nome}</td>
												</tr>
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_city}</b></td>
													<td id="city" class="table-col2">#{item.cidade}</td>
												</tr>
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_road}</b></td>
													<td id="road" class="table-col2">#{item.estrada}</td>
												</tr>
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_km}</b></td>
													<td id="km" class="table-col2">#{item.km}</td>
												</tr>
											</table>
											<div class="modal-footer">
												<button type="button" class="btn btn-default"
													onclick="PF('infoModal#{item.table_id}').hide()">#{msgs.pmv_modal_close}</button>
											</div>
										</p:dialog>
									</div>
								</c:forEach>
							</div>
						</div>
						<!-- FINAL DA TABELA ESTADO ATUAL -->
						<!-- INÍCIO DA TABELA NOVO ESTADO -->
						<div class="col-md">
							<div class="equip-content-2" id="two">
								<h:outputLabel class="label-header-content-2"
									value="#{dmsLabels.dms_active_messages_label_new_state}" />
								<c:forEach items="#{interfaces.dmsList}" var="item"
									varStatus="loop">
									<div class="option-1">
										<div id="1#{item.equip_id}" class="equip-info-2">
											<div class="name-block">
												<div class="name">#{item.nome}</div>
												<div class="km">#{item.km}</div>
											</div>
											<div class="equip-core">
												<table id="#{item.table_id}" class="table-img">
													<tr>
														<td class="image-block"><h:graphicImage
																value="/resources/images/pictures/#{interfaces.image1[loop.index]}"
																styleClass="ui-graphic-board" /></td>
													</tr>
												</table>
												<table class="table-message">
													<tr>
														<td>#{interfaces.letter1[loop.index][0][0]}</td>
														<td>#{interfaces.letter1[loop.index][0][1]}</td>
														<td>#{interfaces.letter1[loop.index][0][2]}</td>
														<td>#{interfaces.letter1[loop.index][0][3]}</td>
														<td>#{interfaces.letter1[loop.index][0][4]}</td>
														<td>#{interfaces.letter1[loop.index][0][5]}</td>
														<td>#{interfaces.letter1[loop.index][0][6]}</td>
														<td>#{interfaces.letter1[loop.index][0][7]}</td>
														<td>#{interfaces.letter1[loop.index][0][8]}</td>
														<td>#{interfaces.letter1[loop.index][0][9]}</td>
														<td>#{interfaces.letter1[loop.index][0][10]}</td>
														<td>#{interfaces.letter1[loop.index][0][11]}</td>
													</tr>

													<tr>
														<td>#{interfaces.letter1[loop.index][1][0]}</td>
														<td>#{interfaces.letter1[loop.index][1][1]}</td>
														<td>#{interfaces.letter1[loop.index][1][2]}</td>
														<td>#{interfaces.letter1[loop.index][1][3]}</td>
														<td>#{interfaces.letter1[loop.index][1][4]}</td>
														<td>#{interfaces.letter1[loop.index][1][5]}</td>
														<td>#{interfaces.letter1[loop.index][1][6]}</td>
														<td>#{interfaces.letter1[loop.index][1][7]}</td>
														<td>#{interfaces.letter1[loop.index][1][8]}</td>
														<td>#{interfaces.letter1[loop.index][1][9]}</td>
														<td>#{interfaces.letter1[loop.index][1][10]}</td>
														<td>#{interfaces.letter1[loop.index][1][11]}</td>
													</tr>
													<tr>
														<td>#{interfaces.letter1[loop.index][2][0]}</td>
														<td>#{interfaces.letter1[loop.index][2][1]}</td>
														<td>#{interfaces.letter1[loop.index][2][2]}</td>
														<td>#{interfaces.letter1[loop.index][2][3]}</td>
														<td>#{interfaces.letter1[loop.index][2][4]}</td>
														<td>#{interfaces.letter1[loop.index][2][5]}</td>
														<td>#{interfaces.letter1[loop.index][2][6]}</td>
														<td>#{interfaces.letter1[loop.index][2][7]}</td>
														<td>#{interfaces.letter1[loop.index][2][8]}</td>
														<td>#{interfaces.letter1[loop.index][2][9]}</td>
														<td>#{interfaces.letter1[loop.index][2][10]}</td>
														<td>#{interfaces.letter1[loop.index][2][11]}</td>
													</tr>
												</table>
											</div>
										</div>
										<p:dialog header="#{msgs.pmv_modal_info_title}"
											widgetVar="infoModal#{item.table_id}" modal="true"
											height="200" showEffect="slide" hideEffect="slide"
											closable="false" resizable="false">
											<br />
											<table class="table-info">
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_equip_id}</b></td>
													<td id="id" class="table-col2">#{item.equip_id}</td>
												</tr>
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_name}</b></td>
													<td id="name" class="table-col2">#{item.nome}</td>
												</tr>
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_city}</b></td>
													<td id="city" class="table-col2">#{item.cidade}</td>
												</tr>
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_road}</b></td>
													<td id="road" class="table-col2">#{item.estrada}</td>
												</tr>
												<tr>
													<td class="table-col1"><b>#{msgs.pmv_modal_km}</b></td>
													<td id="km" class="table-col2">#{item.km}</td>
												</tr>
											</table>
											<div class="modal-footer">
												<button type="button" class="btn btn-default"
													onclick="PF('infoModal#{item.table_id}').hide()">#{msgs.pmv_modal_close}</button>
											</div>
										</p:dialog>
									</div>
								</c:forEach>
							</div>
						</div>
						<!-- FINAL DA TABELA NOVO ESTADO -->
					</div>
				</div>
				<!-- FINAL DA GRID - ESTRUTURA DO DAS TRABELAS -->
			</h:form>
		</div>
		<!-- FINAL DO FORMULARIO EQUIP -->
		<!-- INICIO DO FORUMARIO MODAL -->
		<h:form id="modalForm">
			<!-- INÍCIO DO MODAL -->
			<div class="modal" id="updateModal" tabindex="-1" role="dialog"
				aria-labelledby="updateModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">#{dmsLabels.user_update_modal_title}</h5>
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<p>#{dmsLabels.user_update_modal_body}</p>
						</div>
						<div class="modal-footer">
							<button id="submit" type="button" class="btn btn-dark"
								jsf:action="#{interfaces.sendMessageToActivation}"
								data-dismiss="modal" data-toggle="modal"
								data-target="#statusModal">
								#{dmsLabels.user_update_modal_btn_yes}
								<f:ajax execute="@form" render="@none" />
							</button>
							<button type="button" class="btn btn-dark" data-dismiss="modal">#{dmsLabels.user_update_modal_btn_no}</button>
						</div>
					</div>
				</div>
			</div>
			<!-- FINAL DO MODAL -->
		</h:form>
		<!-- FINAL DO FORUMARIO MODAL -->
		<!-- INÍCIO DO FORMULARIO LOADING -->
		<h:form id="statusForm">
			<!-- INÍCIO DO MODAL LOADING -->
			<div class="modal" id="statusModal" tabindex="-1" role="dialog"
				aria-labelledby="statusModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-body">
							<h:graphicImage class="img-modal"
								value="/resources/images/gifs/loading.gif" width="auto"
								height="auto" />
						</div>
					</div>
				</div>
			</div>
			<!-- FINAL DO MODAL LOADING -->
		</h:form>
		<!-- FINAL DO FORUMARIO LOADING -->
		<script>
			seleccaoHidden();
			
		</script>
	</ui:define>
</ui:composition>
