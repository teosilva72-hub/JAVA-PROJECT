<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf" 
	xmlns:pf="http://primefaces.org/ui"
	template="/template/dashboard-rov-layout.xhtml">
		
	<ui:define name="head" >
	
	<h:outputStylesheet library="css/pmv/table" name="table-style.css"  />	
	<h:outputStylesheet library="css/commom" name="commons.css"  />
	<h:outputStylesheet library="css/users" name="panel-user.css"  /> 
	
	<script type="text/javascript">
	
	function resetTable(){		 
		  $('#user-table').DataTable().clear().draw();	
	}
	
	</script>
		
	</ui:define>
	
	 <ui:define name="main-content" >
	 
	  <div id="message-div">
		<pf:messages id="msgs" showDetail="true" autoUpdate="true" closable="true" />	 
     </div>
	  	      
	  	<div class="container">		
		<div id="tab-content">
				
				<div id="tab-user">
				<h:dataTable id="user-table"  value="#{userAccount.userDataModel}" var="user" autocomplete="off"				               
    			styleClass="table table-striped table-bordered table-dark custom-table" cellspacing="0" width="100%"	
    			headerClass="custom-table-header" 
    			rowClasses="custom-table-odd-row, custom-table-even-row"    
    			columnClasses="idColumn,  nameColumn, jobColumn, emailColumn, userColumn, permitionColumn, statusColumn, actionColumn" > 
    		
    			             		                                                                                                                        
               	<h:column>
				 <f:facet name ="header">#{usersLabels.user_panel_table_col_id}</f:facet>
					<h:outputText value="#{user.user_id}"/>
					
				</h:column>

				<h:column>
				 <f:facet name ="header">#{usersLabels.user_panel_table_col_name}</f:facet>
					<h:outputText value="#{user.name}"/>
				</h:column>

				<h:column>
				 <f:facet name ="header">#{usersLabels.user_panel_table_col_job_position}</f:facet>
					<h:outputText value="#{user.job_position}"/>
				</h:column>
				<h:column>
					<f:facet name="header">#{usersLabels.user_panel_table_col_email}</f:facet>
					<h:outputText value="#{user.email}" />
				</h:column>

				<h:column>
				 <f:facet name ="header">#{usersLabels.user_panel_table_col_user}</f:facet>
					<h:outputText value="#{user.username}"/>
				</h:column>

				<h:column>
				 <f:facet name ="header">#{usersLabels.user_panel_table_col_access_level}</f:facet>
					<h:outputText value="#{user.permission_role}"/>
				</h:column>

				<h:column>
				 <f:facet name ="header">#{usersLabels.user_panel_table_col_status}</f:facet>
					<h:outputText value="#{user.checkActive}"/>
				</h:column>
				
				<h:column>				
						<f:facet name="header">#{usersLabels.user_panel_table_col_actions}</f:facet>
						<div class="action-links">
							<div id="update-link">
							<h:form id="update-form">							
								<h:commandLink action="#{userAccount.usuarioInfoToUp}" 	value=""  >
                                    <span><i class="fas fa-user-edit edit-icon"></i></span>
									<f:setPropertyActionListener value="#{user.user_id}"
										target="#{userAccount.sendParametro}" />									
								</h:commandLink>							
								</h:form>
							</div>
							<div id="delete-link" >
							    <h:form id="delete-form">
								<h:commandLink action="#{userAccount.getRowValue}" value="" >
								    <span><i class="fas fa-trash-alt trash-alt-icon"></i></span>
									<f:setPropertyActionListener
									target="#{userAccount.sendParametro}"  value="#{user.user_id}" />
									<f:passThroughAttribute name="data-toggle" value="modal" />
                                    <f:passThroughAttribute name="data-target" value="#deleteModal" />						    
	                                <f:ajax execute="@form" render="@none" />
								</h:commandLink>
								</h:form>
							</div>
						</div>
					
					</h:column>
			</h:dataTable>			
			</div>	
			<h:form id="form-btns">
			<div id="buttons" >
			<div id="btn-search-tab" class="text-center">
           <h:commandButton id="btn-tab-search" class="btn btn-dark panel-button" 
             value="#{usersLabels.user_panel_btn_select_search}">
           <f:passThroughAttribute name="data-toggle" value="modal" />
           <f:passThroughAttribute name="data-target" value="#modalSearchDialog" />           
           <f:ajax execute="@form" render="@none" />
           </h:commandButton>
            </div>			
							     
							     
			<div id="btn-clean-tab">				
			<h:commandButton value="#{usersLabels.user_panel_btn_select_clean}" id="btn-tab-reset" action="#{userAccount.clearSearchDataTable}"
				class="btn btn-dark panel-button" onclick="resetTable();">	
				<f:ajax execute="@form" render="@form" />
				 </h:commandButton>	   		   	
		   </div>	
		 
		   </div>
		  	 </h:form>	   	   
		</div>		<!-- TAB DIV -->				
	</div>
	
	 
			    
		     <!-- DELETE DIALOG -->
		   	   
		        <h:form id="dialog-form" > 
		        <div class="modal" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
                 <div class="modal-dialog" role="document">
                 <div class="modal-content">
                 <div class="modal-header">
                 <h5 class="modal-title">#{usersLabels.user_delete_modal_title}</h5>
                 <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                 <span aria-hidden="true">&times;</span>
                </button>
                </div>
              <div class="modal-body">        
                 <h:outputText id="modal-text" value="#{usersLabels.user_delete_modal_body} : #{userAccount.rowkey} ?" /> 
               </div>
              <div class="modal-footer">
              <div class="submit-modal" >
              <h:commandButton id="submitBtn" value="#{usersLabels.user_delete_modal_btn_yes}" class="btn btn-dark" action="#{userAccount.excluirUsuario}" />
              </div>
              <div class="cancel-modal">
              <button type="button" class="btn btn-dark" data-dismiss="modal" >#{usersLabels.user_delete_modal_btn_no}</button>                                                            
             </div>
             </div>
             </div>
             </div>
             </div>  
		    </h:form> 
		    
		  <h:form id="modal-search">  
		    <div class="modal fade" id="modalSearchDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
            aria-hidden="true">
        <div class="modal-dialog" role="document">
      <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">#{usersLabels.user_panel_title}</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">							    
						     <div class="groupFieldsSearch">	 
	 	                        <div class="contentGroupSearch">
			                       <div class="input-fields" >
			                         <div  id="input-id"> 
				                      <span><i class="fas fa-id-badge " ></i></span>
				                       <h:inputText value="#{userAccount.parametro}" id="seachr-field"  
				                        p:type="text" p:placeholder="#{usersLabels.user_panel_input_parameter_search_placeholder}" autocomplete="off" />                                  									                                      
					                     </div>					                                            
						             </div>
						             
						             <div class="checkbox-group">											
								<div class="custom-control custom-checkbox">
									<h:selectBooleanCheckbox p:type="checkbox"
										class="custom-control-input" id="select-all" value="#{userAccount.selectAll}">																			
									</h:selectBooleanCheckbox>
									<h:outputLabel class="custom-control-label" for="select-all"
											value="#{usersLabels.user_panel_checkbox_select_all}" />	
								</div>								
							</div>		
					   </div>									
				    </div>							  
                  </div>
     
      <div class="modal-footer d-flex justify-content-center">       
          <div class="submit-modal" >
          <h:commandButton id="searchBtn" value="#{usersLabels.user_panel_btn_select_search}" class="btn btn-dark ml-auto" action="#{userAccount.listarUsuarios}" />
         </div>
         <div class="cancel-modal">
        <button jsf:type="button" class="btn btn-dark" data-dismiss="modal" >#{usersLabels.user_panel_btn_select_clean}</button>                                                                      
       </div>
      </div>
    </div>
  </div>
</div>

</h:form>
		    		    
  </ui:define>
  
   <ui:define name="jscript">
    <h:outputScript name="panel-user-datatable.js" library="js/page-datatables" />	
	</ui:define>
    
</ui:composition>	