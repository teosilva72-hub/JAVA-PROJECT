<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf" 
	xmlns:pf="http://primefaces.org/ui"
	template="/template/dashboard-rov-layout.xhtml" >
			
	<ui:define name="head" >
	
	<h:outputStylesheet name="users-form.css" library="css/users" />
	
	  <script type="text/javascript">
	  
	  /* VALIDATION INPUT */
	          
      //Método para validação do Numero
	   jQuery.validator.addMethod("numero", function(value, element) { 
	    var numero = $('#userId').val();
	    var regex = new RegExp(/^[0-9]+$/); //Preenche campo numerico
	    if(numero.match(regex)) {  $('#userId').removeClass('invalid').addClass('valid'); return true;}
	    
	    else
	   $('#userId').removeClass('valid').addClass('invalid');
	    $('#userId-error').parent().find('.error').fadeIn(500);		  
	    return false;	
	}, "#{validatorMessages.validator_number_message}");
	 
	
	//Método para validação do Email
	jQuery.validator.addMethod("mail", function(value, element) { 
	    var email = $('#email').val();	    
	     var regex = new RegExp(/^[A-Za-z0-9_\-\.]+@[A-Za-z0-9_\-\.]{2,}\.[A-Za-z0-9]{3,}(\.[A-Za-z0-9])?/); 
	   
	     if(email.match(regex)) {  $('#email').removeClass('invalid').addClass('valid'); return true; }
	    
	    	else     
	    	$('#email').removeClass('valid').addClass('invalid');
		    $('#email-error').parent().find('.error').fadeIn(500);	     
	          return false;	 
	}, "#{validatorMessages.validator_email_message}");
	
	//Método para validação do Nome
	jQuery.validator.addMethod("validName", function(value, element) { 
	    var nome = $('#fullname').val();
	    var regex = new RegExp(/[^a-zA-Z\u00C0-\u00FF ]$/); // Preenche alfabeto com caracteres acentuados ou com espaço branco
	    
	    if(nome.match(regex)){
	    	
	    $('#fullname').removeClass('valid').addClass('invalid');
	    $('#fullname-error').parent().find('.error').fadeIn(500);		    
	    return false;
	    	
	    }else {  $('#fullname').removeClass('invalid').addClass('valid'); return true; }
	}, "#{validatorMessages.validator_job_position_message}");
	
	//Método para validação do Nome
	jQuery.validator.addMethod("validJobPos", function(value, element) { 
	    var job = $('#jobPosition').val();
	    var regex = new RegExp(/[^a-zA-Z\u00C0-\u00FF ]$/); // Preenche alfabeto com caracteres acentuados ou com espaço branco
	    if(job.match(regex)){
	    	
	    $('#jobPosition').removeClass('valid').addClass('invalid');
	    $('#jobPosition-error').parent().find('.error').fadeIn(500);		    
	    return false;
	    	
	    }else { $('#jobPosition').removeClass('invalid').addClass('valid'); return true; }
	}, "#{validatorMessages.validator_job_position_message}");
	
	//Método para validação do Username
	jQuery.validator.addMethod("validUser", function(value, element) { 
	    var username = $('#username').val();
	    var regex = new RegExp(/^([a-zA-Z]+[a-zA-Z0-9\._]*[a-zA-Z0-9]+)$/); //Preenche alfabeto com caracteres acentuado e espaço branco
	    if(!username.match(regex)){
	    	
	    $('#username').removeClass('valid').addClass('invalid');
	     $('#username-error').parent().find('.error').fadeIn(500);		    
	    return false;
	    	
	    }else {  $('#username').removeClass('invalid').addClass('valid'); return true;}
	}, "#{validatorMessages.validator_user_message}");
		   	  	   	   
  $(document).ready(function(){
	$('#form-register').validate({	
		rules:{
			userId:{
				required: true,	
				numero: true,
				minlength: 1,
				maxlength: 5
			},
			fullname:{
				required: true,					
				minlength: 5,
				maxlength: 60,
			    validName: true
			},
			jobPosition:{
				required: true,					
				minlength: 5,
				maxlength: 60,
			    validJobPos: true
			},
			email:{
				required: true,					
				maxlength: 80,
			    mail: true
			},
			username:{
			required: true,	
				minlength: 4,
				maxlength: 15,
				validUser: true			
			},
			permissions:{
			  required: true			
			}
		},
		messages: {
           userId: {
                required: "#{requiredMessages.required_user_register_userId}",
                minlength: "#{validatorMessages.validator_global_minlength}",
                maxlength: "#{validatorMessages.validator_global_maxlength}"
            },
             fullname: {
                required: "#{requiredMessages.required_user_register_fullname}",
                minlength: "#{validatorMessages.validator_global_minlength}",
                maxlength: "#{validatorMessages.validator_global_maxlength}"
            },
             jobPosition: {
                required: "#{requiredMessages.required_user_register_job_position}",
                minlength: "#{validatorMessages.validator_global_minlength}",
                maxlength: "#{validatorMessages.validator_global_maxlength}"
            },
             email: {
                required: "#{requiredMessages.required_user_register_email}",
                minlength: "#{validatorMessages.validator_global_minlength}",
                maxlength: "#{validatorMessages.validator_global_maxlength}"
            },
             username: {
                required: "#{requiredMessages.required_user_register_username}",
                minlength: "#{validatorMessages.validator_global_minlength}",
                maxlength: "#{validatorMessages.validator_global_maxlength}"
            },
             permissions: {
                required: "#{requiredMessages.required_user_register_permissions}"           
            }
	      } 
	});	
	
  });

	</script>
	
	</ui:define>
	
	 <ui:define name="main-content" >
	 
	  <h:form prependId="false" id="form-register" >
	  
	   <div id="message-div">
		<pf:messages id="msgs" showDetail="true" autoUpdate="true" closable="true" />	 
       </div>
	  
	   <div class="titleFieldsUser">
	 <h5 class="title text-center">#{usersLabels.user_register_title}</h5>	
	 <div class="titleGroupHr"></div>
	 </div>
	  
	  <div class="groupFieldsUser">	 
	 	
				
				<div class="contentGroupUser">
					<div  class="input-fields" >
					     <div id="input-fullname">
						<span><i class="fas fa-keyboard"></i></span>
						<h:inputText value="#{userAccount.user.name}" autocomplete="off"
					      id="fullname"  p:type="text" p:placeholder="#{usersLabels.user_register_input_full_name_placeholder}" />                                  									
                          <label for="fullname" class="error" id="fullname-error"></label>
					</div>
				</div>
				</div>
				
				<div class="contentGroupUser">
					<div class="input-fields" >
					  <div id="input-job-position" >
						<span><i class="fas fa-briefcase"></i></span>
						<h:inputText value="#{userAccount.user.job_position}" autocomplete="off" id="jobPosition" p:type="text"  p:placeholder="#{usersLabels.user_register_input_job_position_placeholder}" />                                  									
                          <label for="jobPosition" class="error" id="jobPosition-error"></label>
					</div>
				</div>
				</div>
				
				<div class="contentGroupUser">				
					<div  class="input-fields" >
					   <div id="input-email">
						<span><i class="fa fa fa-envelope"></i></span>
						<h:inputText value="#{userAccount.user.email}" autocomplete="off" id="email" p:type="text"  p:placeholder="#{usersLabels.user_register_input_email_placeholder}"  />                                   									
					    <label for="email" class="error" id="email-error"></label>
					</div>
				</div>
				</div>
				
				<div class="contentGroupUser">
					<div class="input-fields" >
					 <div id="input-username">
						<span><i class="fa fa-user"></i></span>
						<h:inputText value="#{userAccount.user.username}" autocomplete="off" p:type="text" name="username" id="username" p:placeholder="#{usersLabels.user_register_input_username_placeholder}"  />                                   									
						<label for="username" class="error" id="username-error" />
						</div>						
					</div>
				</div>
				
				<div class="contentGroupUser">				   
					<div  class="select-fields" >
					<div id="select-role" >
					 <span><i class="fas fa-fingerprint"></i></span>				
						  <h:selectOneMenu  value="#{userAccount.user.permission_id}" id="permissions" >
						   <f:selectItem itemLabel="#{usersLabels.user_register_select_access_level_placeholder}" itemValue="" />
						   <f:selectItem itemLabel="#{usersLabels.users_access_level_label_admin}" itemValue="1" />
						   <f:selectItem itemLabel="#{usersLabels.users_access_level_label_occ}" itemValue="2" />							
						   <f:selectItem itemLabel="#{usersLabels.users_access_level_label_maintenance}" itemValue="3" />
						   <f:selectItem itemLabel="#{usersLabels.users_access_level_label_operational}" itemValue="4" />
						   <f:selectItem itemLabel="#{usersLabels.users_access_level_label_supervisor}" itemValue="5" />
						   <f:selectItem itemLabel="#{usersLabels.users_access_level_label_super_user}" itemValue="6" />
						   <f:selectItem itemLabel="#{usersLabels.users_access_level_label_user}" itemValue="7" />		
						  </h:selectOneMenu>								
					</div>
					 <label for="permissions" class="error" id="permissions-error"></label>
				</div>
				</div>
			
				<div class="contentGroupUser">
					<div id="radio-status">
						 <h:selectOneRadio class="status" value="#{userAccount.user.activeStatus}" >
					     <f:selectItem itemLabel="#{usersLabels.user_register_radio_active_label}" class="rb1" itemValue="true" />
					     <f:selectItem itemLabel="#{usersLabels.user_register_radio_inactive_label}" class="rb2" itemValue="false"  />
						</h:selectOneRadio>
					</div>
				</div>
				
				<br/>
				
				<div class="contentGroupUser">
				<div id="buttons-action">
													
			 <h:commandButton class="btn btn-dark" id="btn-register"
		       value="#{usersLabels.user_register_btn_register}" action="#{userAccount.cadastroUsuario}" >										
			</h:commandButton>		
					
			<h:commandButton value="#{usersLabels.user_register_btn_clean}" id="btn-limpar"
			class="btn btn-dark" >
			<f:ajax render="@form" resetValues="true"/>
			</h:commandButton>						
						
					</div>	
				</div>
				
   </div>
    
    </h:form>
   
    </ui:define>

</ui:composition>	