<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:a="http://xmlns.jcp.org/jsf/passthrough" xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:p="http://jcp.org/ui" template="/template/dashboard-rov-layout.xhtml">

    <ui:define name="loading"></ui:define>

    <ui:define name="head">
        <title>#{abaLabels.occurrences}</title>
        <!-- Style -->
        <h:outputStylesheet library="css/datatables/custom" name="table-style.css" />
        <h:outputStylesheet library="css/occ" name="occurrences.css" />
        <h:outputStylesheet library="css/occ" name="report_tuxpan.css" />
        <h:outputStylesheet library="css/global" name="global.css" />
        <h:outputStylesheet name="datepicker.css" library="css/datepicker" />
        <h:outputStylesheet library="css/commom" name="commons.css" />
        <h:outputStylesheet library="css/forms" name="form-style.css" />
        <!-- FONTAWESOME JS IMPORT -->

    </ui:define>
    <ui:define name="default-content">

        <div class="row">
            <div class="col-2"></div>
            <div class="col-8">
                <h:dataTable id="occurrence-table" var="data" disabled="true" value="#{occurrencesBean2.occurrences}" class="text-center" styleClass="table table-sm custom-table table-striped table-dark table-hover" cellspacing="0" width="100%" headerClass="custom-table-header"
                    columnClasses="idColumn,  typeColumn, nameColumn, imageColumn, textColumn, actionColumn, text-center justify-content-center">

                    <h:column>
                        <f:facet name="header">#{occLabels.occ_list_table_id}</f:facet>
                        <h:outputText value="#{data.data_number}" class="text-center" style="font-size: 12px; " />
                    </h:column>

                    <h:column>
                        <f:facet name="header">#{occLabels.occ_list_table_type}</f:facet>
                        <h:outputText value="#{data.type}" style="font-size: 12px;" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">#{occLabels.occ_list_table_source}</f:facet>
                        <h:outputText value="#{data.date_time}" style="font-size: 12px;" />
                    </h:column>

                    <h:column>
                        <f:facet name="header">#{occLabels.occ_list_table_cause}</f:facet>
                        <h:outputText value="#{data.cause}" style="font-size: 12px;" />
                    </h:column>

                    <h:column>
                        <f:facet class="barraTable text-center" name="header">#{occLabels.occ_list_table_status}</f:facet>
                        <h:outputText value="#{data.state_occurrences}" style="font-size: 12px;" />
                    </h:column>
                    <h:column>
                        <f:facet class="barraTable text-center" name="header">Tipo</f:facet>
                        <h:outputText value="#{data.state_occurrences}" style="font-size: 12px;" />
                    </h:column>

                    <h:column>

                        <f:facet name="header">AÇÕES</f:facet>
                        <h:form prependId="false" id="btn-edit-report">


                            <div class="dropdown">
                                <!-- Edit -->
                                <h:commandLink id="editocc" action="#{occurrencesBean2.getRowValue}">
                                    <i class="fas fa-edit" style="color: gray;"></i>
                                    <f:setPropertyActionListener value="#{data.data_number}" target="#{occurrencesBean2.rowkey}" />
                                    <f:passThroughAttribute name="data-toggle" value="modal" />
                                    <f:passThroughAttribute name="data-target" value="#Occorrencenew" />
                                    <f:ajax execute="@form" render=":form-cadastro :btn-edit-report" />
                                </h:commandLink>
                                <!-- option PDF -->
                                <button class="dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-expanded="false">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
										fill="currentColor" class="bi bi-file-earmark-pdf-fill"
										viewBox="0 0 16 16"> <path
										d="M5.523 12.424c.14-.082.293-.162.459-.238a7.878 7.878 0 0 1-.45.606c-.28.337-.498.516-.635.572a.266.266 0 0 1-.035.012.282.282 0 0 1-.026-.044c-.056-.11-.054-.216.04-.36.106-.165.319-.354.647-.548zm2.455-1.647c-.119.025-.237.05-.356.078a21.148 21.148 0 0 0 .5-1.05 12.045 12.045 0 0 0 .51.858c-.217.032-.436.07-.654.114zm2.525.939a3.881 3.881 0 0 1-.435-.41c.228.005.434.022.612.054.317.057.466.147.518.209a.095.095 0 0 1 .026.064.436.436 0 0 1-.06.2.307.307 0 0 1-.094.124.107.107 0 0 1-.069.015c-.09-.003-.258-.066-.498-.256zM8.278 6.97c-.04.244-.108.524-.2.829a4.86 4.86 0 0 1-.089-.346c-.076-.353-.087-.63-.046-.822.038-.177.11-.248.196-.283a.517.517 0 0 1 .145-.04c.013.03.028.092.032.198.005.122-.007.277-.038.465z" />
									<path fill-rule="evenodd"
										d="M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3zM4.165 13.668c.09.18.23.343.438.419.207.075.412.04.58-.03.318-.13.635-.436.926-.786.333-.401.683-.927 1.021-1.51a11.651 11.651 0 0 1 1.997-.406c.3.383.61.713.91.95.28.22.603.403.934.417a.856.856 0 0 0 .51-.138c.155-.101.27-.247.354-.416.09-.181.145-.37.138-.563a.844.844 0 0 0-.2-.518c-.226-.27-.596-.4-.96-.465a5.76 5.76 0 0 0-1.335-.05 10.954 10.954 0 0 1-.98-1.686c.25-.66.437-1.284.52-1.794.036-.218.055-.426.048-.614a1.238 1.238 0 0 0-.127-.538.7.7 0 0 0-.477-.365c-.202-.043-.41 0-.601.077-.377.15-.576.47-.651.823-.073.34-.04.736.046 1.136.088.406.238.848.43 1.295a19.697 19.697 0 0 1-1.062 2.227 7.662 7.662 0 0 0-1.482.645c-.37.22-.699.48-.897.787-.21.326-.275.714-.08 1.103z" />
									</svg>
								</button>
                                <!-- diferents pdf -->
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <!-- PDF occ-->
                                    <h:commandLink style="color: gray;" id="occpdf" class="dropdown-item" action="#{occurrencesBean2.getRowValue}" value="Ocorrencia ">
                                        <f:setPropertyActionListener value="#{data.data_number}" target="#{occurrencesBean2.rowkey}" />
                                        <f:ajax execute="@form" render=":btn-edit-report :downloadpdf" />
                                    </h:commandLink>
                                    <h:commandLink style="color: gray;" id="sinOcc" class="dropdown-item" action="#{occurrencesBean2.getRowValue}" value="Sinistro">
                                        <f:setPropertyActionListener value="#{data.data_number}" target="#{occurrencesBean2.rowkey}" />
                                        <f:ajax execute="@form" render=":btn-edit-report :downloadpdf" />
                                    </h:commandLink>
                                </div>
                            </div>
                        </h:form>
                    </h:column>
                </h:dataTable>
            </div>
            <div class="col-2">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  					Nuevo Registro
				</button>
            </div>
        </div>
        <!-- MODAL  -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="tituloModal">Ocorrencias</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
                    </div>
                    <div class="modal-body">
                        <!-- START INPUTS -->
                        <h:form prependId="false" id="form-inputs">
                            <div class="row">
                                <div class="col-2"><span>Nº</span>
                                    <h:inputText disabled="true" name="id_occ" id="id_occ" class="form-control" />
                                </div>
                                <div class="col-4"><span>Plaza de Cobro</span>
                                    <h:inputText name="plaza_cobro" id="plaza_cobro" class="form-control" />
                                </div>
                                <div class="col-4"><span>Folio Secuencial</span>
                                    <h:inputText name="folio_secuencial" id="folio_secuencial" class="form-control" />
                                </div>
                                <div class="col-4"><span>Reporte</span>
                                    <h:inputText name="reporte" id="reporte" class="form-control" />
                                </div>
                                <div class="col-4"><span>Siniestro</span>
                                    <h:inputText name="siniestro" id="siniestro" class="form-control" />
                                </div>
                                <div class="col-4"><span>Fecha</span>
                                    <h:inputText name="fecha" id="fecha" class="form-control" />
                                </div>
                                <div class="col-4"><span>Hora</span>
                                    <h:inputText name="hora" id="hora" class="form-control" />
                                </div>
                                <div class="col-4"><span>Dirección Y/O Trayectoria</span>
                                    <h:inputText name="direccion_tray" id="direccion_tray" class="form-control" />
                                </div>
                                <div class="col-4"><span>KM de Registro</span>
                                    <h:inputText name="km_reg" id="km_reg" class="form-control" />
                                </div>
                                <div class="col-4"><span>KM Inicial</span>
                                    <h:inputText name="km_inicial" id="km_inicial" class="form-control" />
                                </div>
                                <div class="col-4"><span>KM Final</span>
                                    <h:inputText name="km_final" id="km_final" class="form-control" />
                                </div>
                                <div class="col-4"><span>Póliza Por Afectar</span>
                                    <h:inputText name="poliza_afectar" id="poliza_afectar" class="form-control" />
                                </div>
                                <div class="col-4"><span>Hora de Registro Cabina</span>
                                    <h:inputText name="hora_reg_cabina" id="hora_reg_cabina" class="form-control" />
                                </div>
                                <div class="col-4"><span>Hora de Arribo de Ajustador</span>
                                    <h:inputText name="hora_ajustador" id="hora_ajustador" class="form-control" />
                                </div>
                            </div>
                            
                            <div class="row" id="vehInv_append">
                            	<div class="col-12 text-center">
                                    <hr></hr>
                                    <p>Vehiculos Involucrados</p>
                                    <hr></hr>
                                </div>
                                <div class="col-5">
                                    <div class="input-group has-validation">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">Tipo de Vehículo</span>
                                        </div>
                                        <input type="text" class="form-control" />
                                    </div>
                                </div>
                                <div class="col-5">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">Nº Ejes</span>
                                        </div>
                                        <input type="text" class="form-control" />
                                    </div>
                                </div>
                                <div class="col-2">
                                    <a id="btn_append"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
									  	<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
									  	<path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
										</svg>
									</a>
                                </div>                               
                            </div>
                            <div class="row">
                            	<div class="col-1 addNum">
                                	<span>Num.</span>
                                	<h:inputText value="" id="num_veh" name="num_veh"/>
                                </div>
                                 <div class="col-1 addMarca">
                                	<span>Marca</span>
                                	<h:inputText value="" id="marca_veh" name="marca_veh"/>
                                </div>
                                 <div class="col-1 addTipo">
                                	<span>Tipo</span>
                                	<h:inputText value="" id="tipo_veh" name="tipo_veh"/>
                                </div>
                                 <div class="col-1 addModelo">
                                	<span>Modelo</span>
                                	<h:inputText value="" id="modelo_veh" name="modelo_veh"/>
                                </div>
                                 <div class="col-1 addCor">
                                	<span>Color</span>
                                	<h:inputText value="" id="cor_veh" name="cor_veh"/>
                                </div>
                                 <div class="col-1 addPlaca">
                                	<span>Placa/Estado</span>
                                	<h:inputText value="" id="placa_veh" name="placa_veh"/>
                                </div>
                                 <div class="col-1 addTel">
                                	<span>Teléfono</span>
                                	<h:inputText value="" id="tel_veh" name="tel_veh"/>
                                </div>
                                <div class="col-1">
                                    <a id="btn_append_veh"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
									  	<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
									  	<path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
										</svg>
									</a>
                                </div>   
                            </div>
                        </h:form>
                        <!-- END INPUTS -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary">Salvar</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Script -->
        <h:outputScript name="controller.js" library="js/occ/tuxpan-report" />
        <h:outputScript name="datepicker.js" library="js/datepicker" />
        <h:outputScript name="locales-datepicker.js" library="js/datepicker" />
        <h:outputScript name="jquery.validate.min.js" library="js/jquery-validation" />
        <h:outputScript name="additional-methods.min.js" library="js/jquery-validation" />
        <h:outputScript name="bootstrap.bundle.min.js" library="bootstrap/js" />
        <script>
            //Inicio dos comandos JavaScript
            //getFilename();

            myFunction(); // ADD ARQUIVOS
            myFunction2(); //myFunction2();
            tabelaReal(); //Função da tabela de seleção [Editar]
            tableBloqueada(); //Função Tabela Oculta [Desabilita o editar]
            selecaoTable(); //Função que pega o id da tabela e coloca nos inputs[]
        </script>
    </ui:define>
</ui:composition>