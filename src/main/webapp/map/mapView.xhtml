<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf">

<f:view locale="#{language.locale}">

  	 <!-- PERMISSIONS AND DEFINITIONS -->

    <ui:param name="permission" value="#{ userAccount.userPermision() }" />
    <ui:param name="SuperAdmin" value="#{ permission == 1 || permission == 6 }" />
    <ui:param name="VideoWall" value="#{ permission == 9 }" />
    <ui:param name="Map" value="map" />
        
    <!-- ENABLED EQUIPS -->
    
    <ui:param name="CFTV" value="#{ loginAccount.load.en_cftv }" />
    <ui:param name="COLAS" value="#{ loginAccount.load.en_colas }" />
    <ui:param name="COMMS" value="#{ loginAccount.load.en_comms }" />
    <ui:param name="DAI" value="#{ loginAccount.load.en_dai }" />
    <ui:param name="DMS" value="#{ loginAccount.load.en_dms }" />
    <ui:param name="HIT" value="#{ loginAccount.load.en_hit }" />
    <ui:param name="OCR" value="#{ loginAccount.load.en_ocr }" />
    <ui:param name="METEO" value="#{ loginAccount.load.en_meteo }" />
    <ui:param name="SAT" value="#{ loginAccount.load.en_sat }" />
    <ui:param name="SOS" value="#{ loginAccount.load.en_sos }" />
    <ui:param name="SPEED" value="#{ loginAccount.load.en_speed }" />
    <ui:param name="WIM" value="#{ loginAccount.load.en_wim }" />
            
    <!---->

	<h:head>

		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<h:outputStylesheet name="bootstrap.css" library="bootstrap/css" />
		<h:outputStylesheet name="map.css" library="css/map" />

		<c:if test="#{ CFTV }">
             <h:outputStylesheet name="cftv.css" library="css/map" />
        </c:if>        
        <!---->        
        <c:if test="#{ DMS }">
            <h:outputStylesheet name="layoutDMS.css" library="css/dms" />
        </c:if>        
        <!---->                
        <c:if test="#{ HIT }">
           <h:outputStylesheet name="layoutHit.css" library="css/hit" />
        </c:if>                
        <!---->               
        <c:if test="#{ METEO }">
            <h:outputStylesheet name="layoutMETEO.css" library="css/meteo" />
        </c:if>
        <!---->
         <c:if test="#{ SAT }">
        	 <h:outputStylesheet name="layoutSAT.css" library="css/sat" />
        </c:if>
        <!---->        
        <c:if test="#{ SPEED }">
            <h:outputStylesheet name="layoutSPEED.css" library="css/speed" />
        </c:if>
        <!---->
         <c:if test="#{ CFTV || COLAS || COMMS || DAI || OCR || SOS || WIM  }">
            <h:outputStylesheet name="layoutGENERIC.css" library="css/generic" />
        </c:if>
        <!---->
		

	</h:head>

	<h:body>

		<div class="content">		
		 
			<main>
				<div class="container-fluid">
				
					 <div class="linesbox d-none"> <!-- Linhas dos equipamentos -->
	                    <div>
	                        <input type="checkbox" id="visiblelines" name="visiblelines" checked=""></input> <label for="visiblelines">#{mapLabels.$label_map_option_btn_lines_equips}</label>
	                    </div>
	                </div>
	                
	                <!---->

					<!-- OVERFLOW -->

					<section class="overflow" scroll-zoom="1.3" max-scale="12" id="content">

						<!-- START SECTION -->
						<div id="zoomtext" scale="1" class="section">

							<ui:param name="Coord" value="#{loginAccount.coord}" />	
											

							<!-- MAP FRONT IMAGE -->
							<h:graphicImage class="grab-map" width="100%"
							value="#{loginAccount.mapUI}" p:dark="#{loginAccount.darkMapUI}" />
							<div class="drawLines grab-map" gps_start="#{''.format('%f;%f;%f', Coord[0][0], Coord[0][1], Coord[0][2])}" gps_end="#{''.format('%f;%f;%f', Coord[1][0], Coord[1][1], Coord[1][2])}"></div>
											
						</div>

						<!-- Label -->
						<div id="labelPos">
							<label id="posX"></label> <label id="posY"></label>
						</div>

						<!-- Drag Items --> <!-- CAUSE -->

						<div class="draggable" id="equipAll">

						</div> <!--  -->

						<!-- Plaque -->
						<ui:fragment rendered="#{loginAccount.plaque ne ''}">

							<div style="display:none">
								<c:forEach items="#{roadView.plaque}" var="plaque">
									<div class="plaque" longitude="#{plaque.longitude}"
										latitude="#{plaque.latitude}">
										<img width="75"
											src="/resources/images/plaques/#{loginAccount.plaque}/#{plaque.km}km.webp" />
									</div>
								</c:forEach>
							</div>

						</ui:fragment>

					</section>

				</div>
			</main>


		</div>
		
		<!-- USE JQUERY RESOURCES AND VALIDATION -->
		
		<h:outputScript name="jquery-3.5.1.min.js" library="js/jquery" />
		<h:outputScript name="bootstrap.bundle.min.js?version=#{notificationsView.timestamp}" library="bootstrap/js" />
		<h:outputScript name="stomp.min.js?version=#{notificationsView.timestamp}" library="js/stomp" />
		<h:outputScript name="controllerStomp.js?version=#{notificationsView.timestamp}" library="js/stomp" />
		
		<h:outputScript name="mapView.js?version=#{notificationsView.timestamp}" library="js/map" />
		<h:outputScript name="gps.js?version=#{notificationsView.timestamp}" library="js/gps" />

	 	<!-- JS FILES -->
		 
		<h:outputScript name="gps.js" library="js/gps" />
		<h:outputScript name="mapView.js" library="js/map" />
		
		 <!---->
        
        <c:if test="#{ CFTV }">
            <h:outputScript library="js/map/" name="mapCftcv.js" />
        </c:if>
        <!---->
        
        <c:if test="#{ DMS }">
            <h:outputScript name="dmsAnimation.js" p:type="module" library="js/dms" />
        </c:if>

        <!---->
        
        <c:if test="#{ HIT }">
        	<h:outputScript name="controllerHIT.js" library="js/hit" />
        </c:if>
        
        <!----> 
       
        <c:if test="#{ METEO }">
            <h:outputScript name="main.js" library="js/meteo" />
        </c:if>
        
        <!----> 
        
         <c:if test="#{ SOS }">
         	<script type="text/javascript" src="/phone/scripts/sos.js"></script>
         </c:if>
         
        <!---->
        
         <c:if test="#{ SPEED }">
            <h:outputScript name="speed_event.js" library="js/speed" />
        </c:if>

        <!----> 

		<form name="roadLine">

			<c:forEach items="#{roadView.roadLine}" var="point">
				<input type="hidden" value="#{''.format('%s,%s,%s', point[0], point[1], point[2])}" />
			</c:forEach>

		</form>

	</h:body>
</f:view>

</html>