<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf">

<f:view locale="#{language.locale}">

	<h:head>

		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

		<h:outputStylesheet name="bootstrap.css" library="bootstrap/css" />

		<!-- USE JQUERY RESOURCES AND VALIDATION -->
		<h:outputScript name="jquery-3.5.1.min.js" library="js/jquery" />


		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<h:outputStylesheet name="layoutSAT.css" library="css/sat" />
		<h:outputStylesheet name="layoutPMV.css" library="css/pmv" />
		<h:outputStylesheet name="layoutGENERIC.css" library="css/generic" />
		<h:outputStylesheet name="mapView.css" library="css/map" />


		<!-- Script -->


	</h:head>

	<h:body>

		<div class="content">

			<main>
				<div class="container-fluid">

					<!-- OVERFLOW -->

					<section class="overflow" scroll-zoom="1" max-scale="12" id="content">

						<!-- START SECTION -->
						<div id="zoomtext" scale="1" class="section">

							<!-- MAP FRONT IMAGE -->
							<h:graphicImage class="grab-map" width="100%"
								value="/resources/images/map/tuxpan/tuxpan.webp" />

						</div>

						<!-- Label -->

						<div id="labelPos">
							<label id="posX"></label> <label id="posY"></label>
						</div>

						<!-- Drag Items -->

						<div class="draggable" id="equipAll">

							<c:forEach items="#{listEquips.equips}" var="loadItem">

								<ui:fragment rendered="#{loadItem.value}">

									<div class="equipments">

										<c:forEach items="#{loadItem.list}" var="item" varStatus="loop">

											<c:choose>
												<c:when test="#{item.table_id eq 'dms'}">
													<div id="listPMV#{item.equip_id}" type="#{item.message.tipo}"
														name="#{item.nome}" driver="#{item.message.driver}">
														<input type="hidden" name="page1"
															imageId="#{item.message.pages[0].id_image}"
															image="#{item.message.pages[0].image}"
															imageId2="#{item.message.pages[0].id_image2}"
															image2="#{item.message.pages[0].image2}"
															line1="#{item.message.pages[0].text1}"
															line2="#{item.message.pages[0].text2}"
															line3="#{item.message.pages[0].text3}"
															timer="#{item.message.pages[0].timer}" />
														<input type="hidden" name="page2"
															imageId="#{item.message.pages[1].id_image}"
															image="#{item.message.pages[1].image}"
															imageId2="#{item.message.pages[1].id_image2}"
															image2="#{item.message.pages[1].image2}"
															line1="#{item.message.pages[1].text1}"
															line2="#{item.message.pages[1].text2}"
															line3="#{item.message.pages[1].text3}"
															timer="#{item.message.pages[1].timer}" />
														<input type="hidden" name="page3"
															imageId="#{item.message.pages[2].id_image}"
															image="#{item.message.pages[2].image}"
															imageId2="#{item.message.pages[2].id_image2}"
															image2="#{item.message.pages[2].image2}"
															line1="#{item.message.pages[2].text1}"
															line2="#{item.message.pages[2].text2}"
															line3="#{item.message.pages[2].text3}"
															timer="#{item.message.pages[2].timer}" />
														<input type="hidden" name="page4"
															imageId="#{item.message.pages[3].id_image}"
															image="#{item.message.pages[3].image}"
															imageId2="#{item.message.pages[3].id_image2}"
															image2="#{item.message.pages[3].image2}"
															line1="#{item.message.pages[3].text1}"
															line2="#{item.message.pages[3].text2}"
															line3="#{item.message.pages[3].text3}"
															timer="#{item.message.pages[3].timer}" />
														<input type="hidden" name="page5"
															imageId="#{item.message.pages[4].id_image}"
															image="#{item.message.pages[4].image}"
															imageId2="#{item.message.pages[4].id_image2}"
															image2="#{item.message.pages[4].image2}"
															line1="#{item.message.pages[4].text1}"
															line2="#{item.message.pages[4].text2}"
															line3="#{item.message.pages[4].text3}"
															timer="#{item.message.pages[4].timer}" />
													</div>
													<div id="#{item.table_id}#{item.equip_id}"
														class="equip-info #{item.table_id}" posX="#{item.mapPosX}"
														posY="#{item.mapPosY}" item-width="#{item.mapWidth}">

														<!-- Table with DIV -->

														<div class="tableStyle card">
															<div class="dms-name card-header py-0">
																<div class="text-center dmsTab#{item.equip_id}">
																	<span class="namePMV">#{item.nome}</span>
																	<span class="kmPMV">#{item.km}</span>
																</div>
															</div>
															<div class="row text-center card-body p-0">
																<div id="child-img" class="col-2 padding-pmv">
																	<img src="/resources/images/pictures/#{pmvMessage.image}"
																		class="picture-box primary" id-img="0" />
																</div>
																<div id="child-msg" class="col-auto msg-pos">
																	<div id="message" class="table-message">
																		<div class="row border-table-right message1"
																			msg="">
																			<div class="col-1 px-0 border-table">
																				<span id="box-1"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-2"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-3"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-4"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-5"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-6"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-7"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-8"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-9"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-10"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-11"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-12"></span>
																			</div>
																		</div>
																		<div class="row border-table-right message2"
																			msg="">
																			<div class="col-1 px-0 border-table">
																				<span id="box-13"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-14"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-15"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-16"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-17"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-18"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-19"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-20"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-21"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-22"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-23"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-24"></span>
																			</div>
																		</div>
																		<div class="row border-table-right bottom message3"
																			msg="">
																			<div class="col-1 px-0 border-table">
																				<span id="box-25"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-26"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-27"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-28"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-29"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-30"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-31"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-32"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-33"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-34"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-35"></span>
																			</div>
																			<div class="col-1 px-0 border-table">
																				<span id="box-36"></span>
																			</div>
																		</div>
																	</div>
																</div>
																<div id="child-img" class="col-2 second-img ml-auto">
																	<img src="/resources/images/pictures/#{pmvMessage.image}"
																		class="picture-box secondary" id-img="0" />
																</div>
															</div>
														</div>

													</div>
												</c:when>
												<c:when test="#{item.table_id eq 'sat'}">

													<div id="#{item.table_id}#{item.equip_id}"
														class="equip-box-sat sat text-dark" posX="#{item.mapPosX}"
														posY="#{item.mapPosY}" item-width="#{item.mapWidth}"
														status-period="#{satMapsView.satListValues.get(loop.index).statusInterval}"
														status="#{satMapsView.satStatus.get(loop.index).status}">
														<div id="sat#{item.equip_id}"
															class="table-sat card border-dark">
															<div id="satName#{item.equip_id}"
																class="satName card-header p-0 border-dark">
																<div id="satTab#{item.equip_id}" class="text-center">
																	<p class="mb-0">#{item.nome} - #{item.km}</p>
																</div>
																<a tabindex="0" class="sat-info-bagde" role="button"
																	data-html="true" data-toggle="popover"
																	data-trigger="focus"
																	data-popover-content="#pop#{item.table_id}#{item.equip_id}">i</a>

															</div>
															<div class="row text-center card-body p-0 mx-0">
																<div class="col-5 padding-sat border-right border-bottom border-dark on-mouse-hover"
																	data-toggle="tooltip" data-placement="left"
																	title="#{item.sentido1}">
																	<i class="fas fa-car sat-cars"
																		title="#{realtimeLabels.realtime_sat_cars_icon_title}"></i>
																	<span
																		id="qtd1">#{satMapsView.satListValues.get(loop.index).quantidadeS1}</span>
																</div>
																<div class="col-7 padding-sat border-bottom border-dark on-mouse-hover"
																	data-toggle="tooltip" data-placement="right"
																	title="#{item.sentido1}">
																	<i class="fas fa-tachometer-alt sat-speed"
																		title="km/h"></i>
																	<span
																		id="speed1">#{satMapsView.satListValues.get(loop.index).velocidadeS1}</span><span
																		class="km"> km/h</span>
																</div>
																<div class="col-5 padding-sat border-right border-dark on-mouse-hover"
																	data-toggle="tooltip" data-placement="left"
																	title="#{item.sentido2}">
																	<i class="fas fa-car sat-cars"
																		title="#{realtimeLabels.realtime_sat_speed_icon_title}"></i>
																	<span
																		id="qtd2">#{satMapsView.satListValues.get(loop.index).quantidadeS2}</span>
																</div>
																<div class="col-7 padding-sat on-mouse-hover"
																	data-toggle="tooltip" data-placement="right"
																	title="#{item.sentido2}">
																	<i class="fas fa-tachometer-alt sat-speed"
																		title="km/h"></i>
																	<span
																		id="speed2">#{satMapsView.satListValues.get(loop.index).velocidadeS2}</span><span
																		class="km"> km/h</span>
																</div>
															</div>

														</div>
														<!-- HTML to write -->

													</div>

													<div id="pop#{item.table_id}#{item.equip_id}"
														style="display: none;">
														<div class="popover-header">#{infoLabels.info_label_header}
														</div>

														<div class="popover-body">

															<div class="row">
																<div class="equip-label-left">
																	<b>#{infoLabels.info_label_equip_id}
																		:</b>&nbsp;#{item.equip_id}
																</div>
															</div>

															<div class="row">
																<div class="equip-label-left">
																	<b>#{infoLabels.info_label_name}
																		:</b>&nbsp;#{item.nome}
																</div>
															</div>

															<div class="row">
																<div class="equip-label-left">
																	<b>#{infoLabels.info_label_highway}
																		:</b>&nbsp;#{item.estrada}
																</div>
															</div>

															<div class="row">
																<div class="equip-label-left">
																	<b>#{infoLabels.info_label_km}
																		:</b>&nbsp;#{item.km}
																</div>
															</div>

															<div class="row">
																<div class="equip-label-left">
																	<b>#{infoLabels.info_label_city}
																		:</b>&nbsp;#{item.cidade}&nbsp;&nbsp;&nbsp;
																</div>
															</div>
															<div class="row">
																<div class="equip-label-left">
																	<b>#{infoLabels.info_label_number_lanes}
																		:</b>&nbsp;#{item.numFaixas}&nbsp;
																</div>
															</div>

															<div class="row">
																<div class="equip-label-left">
																	<b>#{infoLabels.info_label_direction1}
																		:</b>&nbsp;#{item.sentido1}&nbsp;&nbsp;&nbsp;
																</div>
															</div>

															<div class="row">
																<div class="equip-label-left">
																	<b>#{infoLabels.info_label_direction2}
																		:</b>&nbsp;#{item.sentido2}&nbsp;&nbsp;&nbsp;
																</div>
															</div>

														</div>
													</div>

												</c:when>
												<c:otherwise>
													<div id="#{item.table_id}#{item.equip_id}" posX="#{item.mapPosX}"
														posY="#{item.mapPosY}" item-width="#{item.mapWidth}"
														class="equip-box #{item.table_id}">
														<div id="#{item.table_id}Tab#{item.equip_id}" class="row mb-1">
															<p class="col-auto mb-0 pr-1">#{item.nome}</p>
															<span id="#{item.table_id}Status1"
																class="equip-status"></span>
															<p class="col-12 mb-0">#{item.km}</p>
														</div>

														<c:if test="#{item.table_id eq 'cftv'}">
															<h:graphicImage class="equip-image"
																value="/resources/images/equips/camera.png" />
														</c:if>
														<c:if test="#{item.table_id eq 'colas'}">
															<h:graphicImage class="equip-imageCOLAS"
																value="/resources/images/equips/colas.png" />
														</c:if>
														<c:if test="#{item.table_id eq 'comms'}">
															<h:graphicImage class="equip-imageCOMMS"
																value="/resources/images/equips/comms.png" />
														</c:if>
														<c:if test="#{item.table_id eq 'dai'}">
															<h:graphicImage class="equip-imageDAI"
																value="/resources/images/equips/dai.png" />
														</c:if>
														<c:if test="#{item.table_id eq 'lpr'}">
															<h:graphicImage class="equip-imageLPR"
																value="/resources/images/equips/lpr.png" />
														</c:if>
														<c:if test="#{item.table_id eq 'mto'}">
															<h:graphicImage class="equip-imagePOST"
																value="/resources/images/equips/metereologico.png" />
														</c:if>
														<c:if test="#{item.table_id eq 'sos'}">
															<h:graphicImage class="equip-image"
																value="/resources/images/equips/sos.png" />
														</c:if>
														<c:if test="#{item.table_id eq 'speed'}">
															<h:graphicImage class="equip-imageSPD"
																value="/resources/images/equips/speed.png" />
														</c:if>
														<c:if test="#{item.table_id eq 'wim'}">
															<h:graphicImage class="equip-image"
																value="/resources/images/equips/wim.png" />
														</c:if>
													</div>
												</c:otherwise>
											</c:choose>

										</c:forEach>

									</div>

								</ui:fragment>

							</c:forEach>

						</div>

					</section>

				</div>
			</main>


		</div>

		<h:outputScript name="dmsAnimation.js" p:type="module" library="js/dms" />
		<h:outputScript name="popper.min.js" library="js/popper" />
		<h:outputScript name="bootstrap.bundle.min.js" library="bootstrap/js" />

		<h:outputScript name="mapView.js" library="js/map" />
		
		<script>
		
		  function statusColors(){
		      $('#sos2').find('.equip-status').css('background-color', 'orange');
		      $('#sos7').find('.equip-status').css('background-color', 'red');
		      $('#sos14').find('.equip-status').css('background-color', 'orange');
		      $('#sos16').find('.equip-status').css('background-color', 'red');
		      $('#sos22').find('.equip-status').css('background-color', 'orange');
		      $('#sos25').find('.equip-status').css('background-color', 'orange');
		      $('#sos33').find('.equip-status').css('background-color', 'red');
		      $('#sos37').find('.equip-status').css('background-color', 'orange');
		      $('#sos40').find('.equip-status').css('background-color', 'red');
		      
		      $('#colas2').find('.equip-status').css('background-color', 'red');
		      $('#colas3').find('.equip-status').css('background-color', 'orange');
		      $('#colas5').find('.equip-status').css('background-color', 'orange');
		      
		      $('#cftv3').find('.equip-status').css('background-color', 'orange'); 
		      $('#cftv6').find('.equip-status').css('background-color', 'orange'); 
		      $('#cftv10').find('.equip-status').css('background-color', 'red'); 
		      
		      $('#dai1').find('.equip-status').css('background-color', 'red');
		      $('#dai5').find('.equip-status').css('background-color', 'orange');
		      $('#dai6').find('.equip-status').css('background-color', 'orange');
		      $('#dai9').find('.equip-status').css('background-color', 'red');
		      
		      $('#lpr4').find('.equip-status').css('background-color', 'red');
		      $('#lpr7').find('.equip-status').css('background-color', 'red');
		      $('#lpr10').find('.equip-status').css('background-color', 'orange');
		      
		      $('#wim4').find('.equip-status').css('background-color', 'orange');
		      
		      $('#speed5').find('.equip-status').css('background-color', 'orange');
		      $('#speed6').find('.equip-status').css('background-color', 'orange');
		      
		      $('#dms1 .tableStyle').addClass('on')
		      $('#dms3 .tableStyle').addClass('on')
		      $('#dms4 .tableStyle').addClass('on')
		      $('#dms5 .tableStyle').addClass('on')
		      $('#dms6 .tableStyle').addClass('on')	
		  }
		 	 
		
		</script>


	</h:body>
</f:view>

</html>