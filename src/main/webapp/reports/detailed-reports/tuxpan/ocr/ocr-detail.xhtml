<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:pf="http://primefaces.org/ui"
	template="/template/dashboard-rov-layout.xhtml">
	
	<ui:define name="head">
	
		<title>#{abaLabels.ocr_report}</title>
		
		 <!-- CCS STYLE -->
		
		<h:outputStylesheet library="css/datatables/custom"	name="table-style.css" />
		<h:outputStylesheet library="css/reports" name="reports_template.css" />
		<h:outputStylesheet library="css/forms" name="form-style.css" />
		<h:outputStylesheet library="css/ocr" name="ocrStyle.css" />
		<h:outputStylesheet name="datepicker.css" library="css/datepicker" />
		
		<!---->
		
		<!-- JAVASCRIPT FILE -->
				
		<h:outputScript library="js/validation-forms/models" name="validation-models.js" />	<!-- VALIDATION MODEL JS --> 
		<h:outputScript library="js/ocr" name="controller_ocr.js" /> <!-- OCR CONTROLLER -->
		<h:outputScript library="js/alert" name="alerts.js" />	<!-- ENABLE ALERTS --> 	   		
		
		<!---->
		
	</ui:define>
	<ui:define name="main-content">	
	
	  	<!-- ============================================================================================================================= -->
			        
         <!-- ALERT MESSAGE -->
	 
         <ui:include src="/template/alerts/alerts.xhtml" />
             
       <!-- ============================================================================================================================= -->
      
		<div class="row">
			<div class="col-md-12">

				<h1 class="text-center">#{ocrLabels.ocr_report_title}</h1>
				<hr></hr>
			</div>
			<div class="col-md-5">
				<div class="table">
					<!-- TABELA -->
					<h:form prependId="false" id="tabela">
						<h:dataTable id="ocr-table" var="data" disabled="true"
							value="#{OcrReport.list}"
							styleClass="table table-sm custom-table table-striped table-dark table-hover text-center"
							cellspacing="0" width="100" headerClass="custom-table-header"
							columnClasses="idColumn,  typeColumn, nameColumn, imageColumn, textColumn, actionColumn">
							<h:column>
								<f:facet name="header">#{ocrLabels.ocr_report_number_label}</f:facet>
								<h:outputText value="#{data.id}" style="font-size: 12px; " />
							</h:column>
							<h:column>
								<f:facet name="header">#{ocrLabels.ocr_report_dataHour_label}</f:facet>
								<h:outputText value="#{data.dataHour}" style="font-size: 12px; " />
							</h:column>
							<h:column>
								<f:facet name="header">#{ocrLabels.ocr_report_cam_label}</f:facet>
								<h:outputText value="#{data.cam}" style="font-size: 12px; " />
							</h:column>
							<h:column>
								<f:facet name="header">#{ocrLabels.ocr_report_plate_label}</f:facet>
								<h:outputText value="#{data.placa}" style="font-size: 12px; " />
							</h:column>
							<h:column>
								<f:facet name="header">#{ocrLabels.km}</f:facet>
								<h:outputText value="#{data.km}" style="font-size: 12px; " />
							</h:column>
							<h:column>
								<f:facet name="header">#{ocrLabels.direction}</f:facet>
								<h:outputText value="#{data.direction}"
									style="font-size: 12px; " />
							</h:column>
						</h:dataTable>
						<div class="c-loader"></div>
					</h:form>
				</div>
			</div>
			<div class="col-md-1">
				<div class="btns">
					<div class="row">
						<div class="col-md-12">
							<button type="button" class="btn btn-dark btn1" id="btnPdf"
								data-toggle="modal" data-target="#modalPdf">
								<i class="fas fa-file-pdf icone"></i>
							</button>
						</div>
						<div class="col-md-12">
							<button type="button" class="btn btn-warning btn1" id="search"
								data-toggle="modal" data-target="#modalPesquisa"
								onclick="dataPicker()">
								<i class="fas fa-search"></i>
							</button>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<h3 class="text-center"></h3>
				<h:form prependId="false" id="imagem">
					<div class="row">
						<div class="col-md-12">
							<div class="row">
								<div class="col-md-8">
									<img class="img1"
										src="data:image/jpg;base64, #{OcrReport.imageVeh}"></img>
								</div>
								<div class="col-md-3">
									<h4 class="text-center"></h4>
									<img class="img2"
										src="data:image/jpg;base64, #{OcrReport.imagePlt}"></img>
								</div>
							</div>
						</div>
					</div>
				</h:form>
			</div>
		</div>
		<h:form prependId="false" id="ID">
			<h:inputText value="#{OcrReport.rowkey}" id="event"
				style="display:none;" />
			<h:inputText value="#{OcrReport.camera}" id="camSet"
				style="display:none;" />
			<h:commandButton id="btnTable" style="display:none;">
				<f:ajax listener="#{OcrReport.idGet}" execute="@form"
					render=":ID :pdfModal :imagem" />
			</h:commandButton>
		</h:form>
		<!-- Modal -->
		<h:form prependId="false" id="pesquisar">
			<div class="modal fade" id="modalPesquisa" tabindex="-1"
				aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">#{ocrLabels.ocr_report_modal_search_title}</h5>
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
						
							<!-- CAMERA OCR -->
							
							<div class="form-row border border-dark">
								<div class="form-group col-sm-12 select-field">									 	
									    <select name="camera" id="camera" class="w-100" >
										   <option value="">#{ocrLabels.ocr_report_modal_search_all_cam}</option>
											 <ui:repeat var="cam" value="#{OcrReport.cams}" varStatus="camStatus">
												<option value="#{cam.value}">#{cam.label}</option>
											</ui:repeat>
										</select>								
									<hr></hr>
								</div>
								<div class="error-label position-absolute mt-2">
									<label for="camera" class="error" id="camera-error"></label>
								</div>
							</div>
								
							<!---->
							
							<!-- IMAGENS -->
								
							<div class="form-row border border-dark">
								<div class="form-group col-sm-12 position-relative select-field">	
									<span for="img_all" class="valid-icon-hidden"></span> 									
										<!--  <span>#{ocrLabels.ocr_filter_img}</span> -->
										<select name="img_all" id="img_all" class="w-100">
											<option value="0">#{ocrLabels.ocr_option_filter_all_img}</option>
											<option value="1">#{ocrLabels.ocr_option_filer_img_plate}</option>
											<option value="2">#{ocrLabels.ocr_option_filter_img}</option>
										</select>
										<h:inputHidden id="img_all_get" value="#{OcrReport.all_img}"></h:inputHidden>
										<hr></hr>
								</div>
								<div class="error-label"></div>
							</div>
							
							 <!---->	
							 
							 <!-- START DATE -->
							 
							<div class="form-row no-flex-wrap">
							   <div class="col-5 position-relative">
								 <div class="form-group input-field">	
									<span><i class="far fa-calendar-alt"></i></span>										
									 <input type="text" class="datepicker" autocomplete="off" name="dateInitial" id="dateInitial"
									  placeholder="dd/mm/yyyy" />
								</div>
								<div class="error-label position-absolute">
									<label for="dateInitial" class="error" id="dateInitial-error"></label>
								</div>
							</div>		
													
							<!---->								
									
							<div class="col mx-1 position-relative">							
								<div class="form-group select-field no-flex-wrap">	
							   		<select name="hourInitial" id="hourInitial" class="text-center" >
								   		<option value="">#{ocrLabels.ocr_report_modal_search_hourInitial}</option>
									 		<ui:repeat var="hr" value="#{OcrReport.horas}" varStatus="hrStatus">
										<option value="#{hr.value}">#{hr.label}</option>
									</ui:repeat>
								</select>	
							</div>	
							<div class="error-label position-absolute">
								<label for="hourInitial" class="error" id="hourInitial-error"></label>
							</div>
						</div>
								
						<!---->	
													
						<div class="col position-relative mx-1">
							<div class="form-group select-field no-flex-wrap">								
							   	<select name="minuteInitial" id="minuteInitial" class="text-center" >
								   <option value="">#{ocrLabels.ocr_report_modal_search_minuteInitial}</option>
									 <ui:repeat var="min" value="#{OcrReport.minutos}" varStatus="minStatus">
										<option value="#{min.value}">#{min.label}</option>
									</ui:repeat>
								</select>	
							</div>	
							<div class="error-label position-absolute">
								<label for="minuteInitial" class="error" id="minuteInitial-error"></label>
						 </div>	
					 </div>
					<!---->	
				 </div>							
											
				<!---->
							
					<!-- END DATE -->
									
					<div class="form-row no-flex-wrap">
					   <div class="col-5 position-relative">
						 <div class="form-group input-field">	
							<span><i class="far fa-calendar-alt"></i></span>										
							 <input type="text" class="datepicker" autocomplete="off" name="dateFinal" id="dateFinal"
							  placeholder="dd/mm/yyyy" />
						</div>
						<div class="error-label position-absolute">
							<label for="dateFinal" class="error" id="dateFinal-error"></label>
						</div>
					</div>		
												
						<!---->								
								
						<div class="col mx-1 position-relative">							
							<div class="form-group select-field no-flex-wrap">	
						   		<select name="hourFinal" id="hourFinal" class="text-center" >
							   		<option value="">#{ocrLabels.ocr_report_modal_search_hourInitial}</option>
								 		<ui:repeat var="hr" value="#{OcrReport.horas}" varStatus="hrStatus">
									<option value="#{hr.value}">#{hr.label}</option>
								</ui:repeat>
							</select>	
						</div>	
						<div class="error-label position-absolute">
							<label for="hourFinal" class="error" id="hourFinal-error"></label>
						</div>
					</div>
							
					<!---->	
												
					<div class="col position-relative mx-1">
						<div class="form-group select-field no-flex-wrap">								
						   	<select name="minuteFinal" id="minuteFinal" class="text-center" >
							   <option value="">#{ocrLabels.ocr_report_modal_search_minuteInitial}</option>
								 <ui:repeat var="min" value="#{OcrReport.minutos}" varStatus="minStatus">
									<option value="#{min.value}">#{min.label}</option>
								</ui:repeat>
							</select>	
						</div>	
						<div class="error-label position-absolute">
							<label for="minuteFinal" class="error" id="minuteFinal-error"></label>
					 </div>	
				 </div>
				<!---->	
			 </div>							
										
			<!---->													
											
				</div>
				<div class="modal-footer">

					<button type="button" class="btn btn-secondary"
						data-dismiss="modal">#{ocrLabels.ocr_report_modal_search_close_button}</button>

					<button type="button" class="btn btn-dark" id="enviar" onclick="$('[id$=setForm]').click();">#{ocrLabels.ocr_report_modal_search_search_button}</button>
				</div>
			</div>
		</div>
	</div>

			<h:commandButton class="btn btn-dark form-modal-draw-button d-none" id="setForm" 
				 action="#{OcrReport.search}" />
				 <!-- SEND -->
					
	

		</h:form>
		<!-- modal pdf -->
		<h:form prependId="false" id="pdfModal">
			<div class="modal fade" id="modalPdf" tabindex="-1"
				aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">
								#{ocrLabels.ocr_report_modal_download_title} <i
									class="fas fa-cloud-download-alt"></i>
							</h5>
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<div class="row">
								<div class="font-weight-bold ml-5">ID: #{OcrReport.rowkey}</div>
							</div>
							<div class="row">
								<p class="text-dark ml-5">
									#{ocrLabels.ocr_reports_modal_download_file} <span
										class="text-danger">#{ocrLabels.ocr_reports_modal_download_extension_pdf}</span>
									?
								</p>
							</div>
						</div>
						<div class="modal-footer">

							<h:commandButton
								value="#{ocrLabels.ocr_reports_modal_download_btn_no}"
								class="btn btn-dark form-draw-button" id="limpar">
								<f:passThroughAttribute name="data-dismiss" value="modal" />
								<f:ajax execute="@form" render="@none" />
							</h:commandButton>

							<h:commandButton pt:onclose="download" pt:data-toggle="modal"
								pt:data-target="#modalPdf" id="gerarPdf"
								value="#{ocrLabels.ocr_reports_modal_download_btn_yes}"
								class="btn btn-dark form-draw-button" action="#{OcrReport.pdf}" />

						</div>
					</div>
				</div>
			</div>
		</h:form>
		<h:outputScript name="datepicker.js" library="js/datepicker" />
		<h:outputScript name="locales-datepicker.js" library="js/datepicker" />
		<h:outputScript name="jquery.validate.min.js"
			library="js/jquery-validation" />
		<h:outputScript name="additional-methods.min.js"
			library="js/jquery-validation" />
		<h:outputScript name="bootstrap.bundle.min.js" library="bootstrap/js" />
				
	  <!-- ============================================================================================================================= -->
	  
	   <!-- VALIDATION ATTRIBUTES: VÁRIAVEIS DE ATRIBUIÇÃO QUE SERÃO ENVIADAS A UM ARQUIVO EXTERNO JS PARAR USO DE VALIDAÇÃO -->	 	
		 	 	 	
		 <form name="validation"> <!-- FORM VALIDATION  -->
		 		   	 	
		 <input type="hidden" name="language" value="#{language.locale}" /> <!-- LOCALE LANGUAGE ATTRIBUTE -->
		  <input type="hidden" name="requiredFieldMsg" value="#{requiredMessages.required_reports_select_equipments}" /> <!-- REQUIRED MESSAGE -->	
			 
		 </form> <!-- FORM VALIDATION END -->
		 
	  <!-- ============================================================================================================================= -->
	
		
		
	</ui:define>
</ui:composition>
